<app-unauthorized-page (isAuthorized)="isAuthorizedUser($event)" *ngIf="!isAuthorized"></app-unauthorized-page>

<div [className]="sidebarCheck ? 'half-open-breadcrum breadcrumb-box' : 'full-open-breadcrum breadcrumb-box' " #scrollToTop [hidden]="!isAuthorized">
  <ol class="breadcrumb breadcrumb-arrow ">
    <li><a class="icon ion-ios-home" routerLink="/iol"> Dashboard </a> </li>
    <!-- <li><a (click)="pageReload()"> User & Admin</a></li> -->
    <li><a (click)="pageReload()">Staff</a></li>
    <!-- <li><a> User & Admin</a></li>
    <li><a routerLink="/iol/admin/staff">Staff</a></li> -->
    </ol>
  </div>
<!-- </div> -->


<div [className]="sidebarCheck ? 'half-open-sidebar page-content  container-fluid' : 'full-open-sidebar page-content  container-fluid' "  style="padding-bottom:200px" [hidden]="!isAuthorized">
  <div class="panel-heading font-weight-600 margin-bottom-0">
  </div>

  <div class="panel-body padding-0">
    <div class="tab-content">
      <div class="tab-pane active" id="Summary">
        <div class=" margin-bottom-0 ">
          <div class="panel-body padding-15 ">
            <div class="row">

              <div class="col-lg-4 card-group-row__col">
                <div class="panel panel-default round  ">

                  <!-- <div class="panel-heading" style="background:#E60000; margin-bottom: 0px;">
                  <h3 class="panel-title font-weight-600 " style="color: white;">
                    Choose Parameters
                  </h3>
                  <div class="panel-actions">
                    <a class="panel-action"></a>
                  </div>
                </div> -->

                  <div class="col-lg-10" *ngIf="loggedInUser.read_only != true"
                    style="padding:0px; margin-top: 10px; margin-bottom: 15px;margin-left: 25px;">
                    <button #editpop type="button" class="btn btn-lg btn-primary btn-block btncolor"
                      (click)="clearForm()" data-target="#editpop1" data-toggle="modal"
                      style="font-size: 14px;border-radius: 20px;">
                      <i class="ri-add-circle-fill"></i> New
                    </button>

                    <button type="button" class="btn btn-lg btn-primary btn-block btncolor" (click)="clearForm2()"
                      data-target="#bulkUploadModal" data-toggle="modal" style="font-size: 14px;border-radius: 20px;">
                      <i class="ri-file-upload-fill"></i> Bulk Upload
                    </button>
                  </div>

                  <div class="col-lg-12" style="margin-top: 5px; margin-bottom: 5px;">
                    <form [formGroup]="searchForm" (ngSubmit)="onSearch(searchForm.value)">
                      <!-- <div class="form-group">
                      <h5 class=" font-weight-600 ">Search</h5>
                      <div class="panel-actions">
                        <a class="panel-action "></a>
                      </div>
                      <input type="text" class="form-control input-sm" formControlName="search" placeholder="Search"
                        (keyup)='keyUp.next($event)' style="height: 36px;">
                    </div> -->
                      <!-- <hr> -->
                      <div class="form-group margin-bottom-10">
                        <fieldset class="form-fieldset">
                          <legend>Search</legend>

                          <div class="form-group margin-bottom-10">
                            <div class="input-search">
                              <i class="input-search-icon ri-search-line"></i>
                              <input type="text" class="form-control" formControlName="search" name=""
                                placeholder="Search...">
                              <button type="button" class="input-search-close icon " data-toggle="popover"
                                data-original-title="" data-trigger="hover" data-container="body" data-placement="top"
                                data-html="true" id="help2" pTooltip='Name,Employee ID' tooltipPosition="top"><i
                                  class="ri-question-line"></i></button>
                              <div id="popover-content-help2" class="hide">
                                Some help information goes here
                              </div>

                            </div>
                          </div>


                          <div class="form-group margin-bottom-0 text-center">
                            <button href="" type="submit" class="btn btn-success btn-round btn-block1"> <i
                                class=" ri-search-line "></i> Search</button>
                            <button (click)="onClearSearch()" href=" " class="btn btn-default btn-round "> <i
                                class="ri-refresh-line "></i>
                              Clear
                            </button>
                          </div>


                        </fieldset>
                      </div>
                      <hr>
                      <div class="form-group margin-bottom-0">
                        <label class="font-size-14 font-weight-600 ">Export:</label>
                        <div class="btn-group btn-group-justified">
                          <div class="btn-group" role="group">
                            <a (click)="downloadXLS(downloadableLink)">
                              <button type="button" class="btn btn-outline btn-default"> <img
                                  src="../../../assets/images/icon-xls.png" height="50">
                                <div class="font-size-12">
                                  <!-- [href]="downloadableLink" -->
                                  <a  class="enabled">
                                    Download XLS </a>
                                </div>
                              </button>
                            </a>
                          </div>
                          <div class="btn-group" role="group">
                            <a (click)="downloadPDF(downloadableLink1)">
                              <button type="button" class="btn btn-outline btn-default"> <img
                                  src="../../../assets/images/icon-pdf.png" height="50">
                                <div class="font-size-12">Download PDF</div>
                              </button>
                            </a>
                          </div>

                        </div>
                      </div>
                    </form>
                  </div>

                  <!-- comment out for now as  -->
                  <!-- <div class="col-lg-12">
                  <div class="panel-heading " style="background:#E60000;margin-bottom: 0px;">
                    <h3 class="panel-title font-weight-600 " style="color: white;">
                      Export: Fuel
                    </h3>
                    <div class="panel-actions">
                      <a class="panel-action ">.</a>
                    </div>
                  </div>

                  <br>

                  <div class="row">
                    <div class="col-sm-6" style="text-align: center;">
                      <div style="margin-left: 80px;">
                        <span class=""> <img src="/assets/images/pdf.png" alt="img" style="max-height: 60px;"> </span>
                      </div>
                    </div>
                    <div class="col-sm-6" style="text-align: center;">
                      <div style="margin-right: 80px;">
                        <span class=""> <img src="/assets/images/xls.png" alt="img" style="max-height: 60px;"> </span>
                      </div>
                    </div>
                  </div>
                  <hr>
                </div> -->
                </div>
              </div>

              <div class="col-lg-8">
                <div class="row">

                  <div class="col-lg-12">
                    <div class="panel panel-default  padding-0  card  light"
                      style="min-height: 200px; color: aliceblue;">
                      <div class="panel-heading margin-bottom-0">
                        <h3 class="panel-title font-weight-600 bg-theme1 white1 "> List
                          <span>
                            <button *ngIf="selection.selected.length > 0 && loggedInUser.read_only != true"
                              type="button" pTooltip="Delete Selected"
                              class="btn btn-icon btn-danger btn-xs margin-left-5" (click)="showSwalBulk()"
                              data-original-title="Delete"><i class="icon ion-android-delete"></i>
                            </button>
                          </span>
                        </h3>
                        <div id="popover-content-help1" class="hide">
                          Some help information goes here
                        </div>
                        <div class="panel-actions">
                          <a></a>
                        </div>
                      </div>

                      <div class="table-responsive margin-top-20" style="border: 1px solid #ebebeb;">
                        <p-progressBar *ngIf="showIndeterminateProgress" [style]="{'height': '3px'}"
                          mode="indeterminate"></p-progressBar>

                        <table matSort (matSortChange)="sortDrivers($event)"
                          class="table margin-bottom-0 table-condensed1 table-bordered1 text-wrap theme-table1"
                          mat-table [dataSource]="drivers" mat-elevation-z8>

                          <ng-container matColumnDef="select">
                            <th mat-header-cell *matHeaderCellDef>
                              <span *ngIf="loggedInUser.read_only != true">
                                <mat-checkbox (change)="$event ? masterToggle() : null"
                                  [checked]="selection.hasValue() && isAllSelected()"
                                  [indeterminate]="selection.hasValue() && !isAllSelected()">
                                </mat-checkbox>
                              </span>
                            </th>
                            <td mat-cell *matCellDef="let row">
                              <span *ngIf="loggedInUser.read_only != true">
                                <mat-checkbox (click)="$event.stopPropagation()"
                                  (change)="$event ? selection.toggle(row) : null"
                                  [checked]="selection.isSelected(row)">
                                </mat-checkbox>
                              </span>
                            </td>
                          </ng-container>

                          <ng-container matColumnDef="name">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header>NAME</th>
                            <td mat-cell *matCellDef="let row">
                              <div style="width: 160px; float: left">
                                <!-- <img [src]="row.user_image || '../assets/images/default_user.png'"
                                  class="img-bordered pull-left margin-right-10" height="36px" /> -->
                                <span *ngIf="row.type==54">{{ (row.name == null) ? 'N/A': row.name }}</span>
                                <div *ngIf="row.type==5" class="media-body pointer"
                                  [routerLink]="gotoService.gotoDriver(row.id)">
                                  <a class="font-weight-600">{{ (row.name == null) ? 'N/A': row.name }}</a>
                                </div>
                              </div>
                            </td>
                          </ng-container>
                          <ng-container matColumnDef="cnic">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header>EMPLOYEE ID</th>
                            <td mat-cell *matCellDef="let row">
                              {{ (row.employee_id == null) ? 'N/A': row.employee_id }}
                            </td>
                          </ng-container>
                          <ng-container matColumnDef="status">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header>STATUS</th>
                            <td mat-cell *matCellDef="let row">
                              <span class="label"
                                [ngClass]="(row.status === EntityStatusEnum.Active)? 'label-success': 'label-danger'">
                                {{(row.status === EntityStatusEnum.Active)? 'Active' : 'Inactive'}}
                              </span>
                            </td>
                          </ng-container>
                          <ng-container matColumnDef="on_shift">
                            <th mat-header-cell *matHeaderCellDef>SHIFT STATUS</th>
                            <!-- <td mat-cell *matCellDef="let row" style="color: black !important">
                              <span class="label" [ngClass]="(row.on_shift === true)? 'label-infor': 'label-default'"
                                style="color: #6a7277 !important">
                                {{ row.on_shift ? 'On Shift' : 'Off Shift' }}
                              </span>
                            </td> -->
                            <td mat-cell *matCellDef="let row">
                              <span style="color: #333"
                                [ngClass]="(row.type==5 ? ((row.on_shift ? 'label label-info' : 'label label-default')) : '') ">{{row.type==5
                                ? ((row.on_shift ?
                                'On Shift' : 'Off Shift')) : '-'}}</span>
                            </td>
                          </ng-container>
                          <ng-container matColumnDef="modified_by_name">
                            <th mat-header-cell *matHeaderCellDef>MODIFIED BY</th>
                            <td mat-cell *matCellDef="let row">
                              {{ row.modified_by_name || 'N/A' }}</td>
                          </ng-container>
                          <ng-container matColumnDef="modified_datetime">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header>MODIFIED DATETIME</th>
                            <td mat-cell *matCellDef="let row">
                              {{ (row.modified_datetime | date: 'M/d/yyyy, h:mm:ss a') || 'N/A' }}</td>
                          </ng-container>
                          <ng-container matColumnDef="role">
                            <th mat-header-cell *matHeaderCellDef>Role</th>
                            <td mat-cell *matCellDef="let row">

                              {{ (row.type == 5) ? 'Driver': 'Staff' }}
                            </td>
                          </ng-container>
                          <ng-container matColumnDef="created_datetime">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header>CREATED DATETIME</th>
                            <td mat-cell *matCellDef="let row">
                              {{ (row.created_datetime | date: 'M/d/yyyy, h:mm:ss a') || 'N/A' }}</td>
                          </ng-container>
                          <ng-container matColumnDef="actions">
                            <th mat-header-cell *matHeaderCellDef>Actions</th>
                            <td mat-cell *matCellDef="let row">
                              <button *ngIf="loggedInUser.read_only != true" type="button"
                                class="btn btn-icon  btn-info btn-xs " data-target="#editpop1" data-toggle="modal"
                                pTooltip="Edit" (click)="openEditModal(row)">
                                <i class="icon ion-edit"></i>
                              </button>
                              <button *ngIf="loggedInUser.read_only != true" type="button" pTooltip="Delete "
                                class="btn btn-icon  btn-danger btn-xs " (click)="showSwal(row)"
                                data-original-title="Delete"> <i class="icon ion-android-delete"></i>
                              </button>
                            </td>
                          </ng-container>

                          <tr mat-header-row *matHeaderRowDef="displayedDriverList"></tr>
                          <tr mat-row *matRowDef="let row; columns: displayedDriverList;"></tr>
                        </table>

                        <div *ngIf="drivers?.length === 0 && !showIndeterminateProgress " class="no-records">No records
                          found</div>

                        <mat-paginator translate="no" #driverPaginator [length]="totalDriverLength"
                          [hidePageSize]="true" showFirstLastButtons (page)="onDriverPagination($event)"
                          [pageSize]="10">
                        </mat-paginator>
                      </div>

                    </div>
                  </div>

                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>


<div #formModal class="modal fade  modal-success text-left" id="editpop1" role="dialog" tabindex="-1">
  <div class="modal-dialog modal-center  modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" (click)=" close()" data-dismiss="modal">
          <span>x</span>
        </button>
        <h4 class="modal-title">{{inactiveRecord ? 'Update Staff' : formTitle}}</h4>
      </div>

      <div class="modal-body">
        <div class="">
          <div class="row">
            <div class="">
              <form novalidate [formGroup]="driverForm" id="driverFormID" (ngSubmit)="onSubmit(driverForm.value)">
                <fieldset [disabled]="inactiveRecord">
                  <div class="">
                    <div class="col-md-12">
                      <div class="row">
                        <div class="col-sm-4">
                          <div class="form-group">
                            <label class="control-label form-label">Name<span class="text-danger2">*</span></label>
                            <div class="input-icon">
                              <input [readOnly]="onShift" class="form-control" formControlName="name" maxLength="25" />

                              <span class="error-message"
                                *ngIf="driverForm.get('name').getError('required') && submitted"> Please
                                provide name</span>

                              <span class="error-message"
                                *ngIf="driverForm.get('name').getError('isAlphabetsAndSpace') && submitted">Enter
                                alphabets only
                              </span>

                              <span class="error-message"
                                *ngIf="driverForm.get('name').getError('pattern') && submitted">
                                Avoid white spaces
                              </span>

                            </div>
                          </div>
                        </div>

                        <div class="col-sm-4">
                          <div class="form-group">
                            <label class="control-label form-label">Employee ID<span
                                class="text-danger2">*</span></label>
                            <input type="number"
                              oninput=" if (this.value.length > this.maxLength) this.value = this.value.slice(0, this.maxLength);"
                              class="form-control" maxlength="18" formControlName="cnic" />

                            <span class="error-message"
                              *ngIf="driverForm.get('cnic').getError('required') && submitted"> Please
                              provide employee ID</span>

                            <span class="error-message"
                              *ngIf="driverForm.get('cnic').getError('isNumbers') && submitted"> Please
                              Enter Only Numbers</span>

                            <span class="error-message" style="position: relative !important"
                              *ngIf="driverForm.get('cnic').getError('isCNIC') && submitted">Please enter Valid ID
                              <br> <small>(atleast 3-18 characters)</small>
                            </span>

                            <!-- <span class="error-message" style="display: block;"
                                *ngIf="driverForm.get('cnic').getError('pattern') && submitted">
                                Avoid white spaces
                            </span> -->

                          </div>
                        </div>

                        <div class="col-sm-4">
                          <div class="form-group">
                            <label class="control-label">Birth Date<span class="text-danger2">*</span></label>
                            <p-calendar [readonlyInput]="true" [monthNavigator]="true" [yearNavigator]="true"
                              [yearRange]="'1950:'+(currentDate.getFullYear())" [(ngModel)]="dob"
                              [maxDate]="currentDate" name="dateOfBirth" (onSelect)="returndob()"
                              placeholder="MM/DD/YYYY" styleClass="prime-datetime" formControlName="dob">
                            </p-calendar>

                            <span class="error-message" style="position: relative!important;"
                              *ngIf="driverForm.get('dob').getError('required') && submitted">
                              Please provide date of birth</span>
                          </div>
                        </div>
                      </div>

                      <div class="row">
                        <div class="col-sm-4">
                          <div class="form-group">
                            <label class="control-label">Joining Date<span class="text-danger2">*</span> </label>
                            <div class="input-icon">
                              <p-calendar [minDate]="dob" [readonlyInput]="true" [monthNavigator]="true"
                                [yearNavigator]="true"
                                [yearRange]="(currentDate.getFullYear() - 40) + ':' +(currentDate.getFullYear())"
                                [(ngModel)]="date_of_joining" name="joiningDate" (onSelect)="returndob()"
                                placeholder="MM/DD/YYYY" styleClass="prime-datetime" formControlName="date_of_joining">
                              </p-calendar>

                              <span class="error-message" style="position: relative!important;"
                                *ngIf="driverForm.get('date_of_joining').getError('required') && submitted"> Please
                                provide joining date</span>
                            </div>
                          </div>
                        </div>

                        <div class="col-sm-4">
                          <div class="form-group">
                            <label class="control-label">Salary<span class="text-danger2">*</span></label>
                            <div class="input-icon">
                              <input type="number"
                                oninput=" if (this.value.length > this.maxLength) this.value = this.value.slice(0, this.maxLength);"
                                class="form-control" maxlength="8" formControlName="salary" />
                              <!-- <input type="text"
                              oninput="this.value = !!this.value && this.value >= 0 ? this.value : null; if (this.value.length > this.maxLength) this.value = this.value.slice(0, this.maxLength);" class="form-control" maxlength="8" min=0 formControlName="salary" /> -->
                              <span class="error-message"
                                *ngIf="driverForm.get('salary').getError('required') && submitted"> Please
                                provide salary</span>
                            </div>
                          </div>
                        </div>

                        <div class="col-sm-4">
                          <div class="form-group">
                            <label class="control-label">Marital Status<span class="text-danger2">*</span></label>
                            <div class="input-icon">
                              <p-dropdown *ngIf="!inactiveRecord" [options]="itemListMaritalStatus"
                                name="selectedMaritalStatus" [(ngModel)]="selectedMaritalStatus"
                                formControlName="marital_status_id" styleClass="prime-dropdown"
                                placeholder="Marital Status">
                              </p-dropdown>
                              <input *ngIf="inactiveRecord" class="form-control" formControlName="marital_status_id" />

                              <span class="error-message"
                                *ngIf="driverForm.get('marital_status_id').getError('required') && submitted"> Please
                                provide marital status</span>
                            </div>
                          </div>
                        </div>
                      </div>

                      <div class="row">
                        <div class="col-sm-4">
                          <div class="form-group">
                            <label class="control-label">Gender<span class="text-danger2">*</span></label>
                            <div class="input-icon">
                              <p-dropdown *ngIf="!inactiveRecord" [options]="itemListGenders"
                                [(ngModel)]="selectedGender" formControlName="gender_id" name="selectedGender"
                                styleClass="prime-dropdown" placeholder="Gender">
                              </p-dropdown>
                              <input *ngIf="inactiveRecord" class="form-control" formControlName="gender_id" />

                              <span class="error-message"
                                *ngIf="driverForm.get('gender_id').getError('required') && submitted"> Please
                                provide gender
                              </span>
                            </div>
                          </div>
                        </div>

                        <!-- <div class="col-sm-4">
                          <div class="form-group">
                            <label class="control-label">Role<span class="text-danger2">*</span></label>
                            <div class="input-icon">
                              <p-dropdown [(ngModel)]="selectedRole" [disabled]="isEdit" [options]="itemListRole"
                                formControlName="type" styleClass="prime-dropdown" placeholder="Select Staff Role"
                                filter="true">
                              </p-dropdown>

                              <span class="error-message"
                                *ngIf="driverForm.get('type').getError('required') && submitted"> Please
                                provide role</span>
                            </div>
                          </div>
                        </div> -->

                        <div class="col-sm-4 col-lg-4">
                          <div class="form-group">
                            <label class="control-label">Contact Number<span class="text-danger2">*</span></label>
                            <div class="input-icon">
                              <p-inputMask formControlName="contact_number" mask="+999-9999-9999" maxlength="15"
                                characterPattern="[0-9+]" placeholder="+999-9999-9999" [styleClass]="'form-control'">
                              </p-inputMask>

                              <span class="error-message"
                                *ngIf="driverForm.get('contact_number').getError('pattern') && submitted">
                                Avoid white spaces
                              </span>
                              <span class="error-message"
                                *ngIf="driverForm.get('contact_number').getError('required') && submitted"> Please
                                provide contact number</span>
                            </div>
                          </div>
                        </div>

                        <div class="col-sm-4">
                          <div class="form-group">
                            <label class="control-label">Email<span class="text-danger2">*</span></label>
                            <div class="input-icon">
                              <input type="text" autocomplete="new-email" class="form-control"
                                formControlName="email" />
                              <span class="error-message" style="position: relative !important">
                                <span
                                  *ngIf="driverForm.get('email').dirty && driverForm.get('email').getError('email') || driverForm.get('email')?.errors?.pattern">Please
                                  provide proper email
                                </span>

                                <span *ngIf="driverForm.get('email').getError('required') && submitted">
                                  Please provide email
                                </span>

                                <!-- <span *ngIf="userForm.get('email').hasError('pattern') && submitted">

                                    <br
                                      *ngIf="userForm.get('email').getError('pattern') && submitted && userForm.get('email').value">
                                    Invalid
                                    email pattern
                                </span> -->

                              </span>
                            </div>
                          </div>
                        </div>

                        <!-- <div class="col-sm-4" *ngIf="!selectedUserId">
                          <div class="form-group">
                            <label class="control-label">Password<span class="text-danger2">*</span></label>

                            <div class="input-group">
                              <input *ngIf="show_password; else hidePassword" type="text" class="form-control"
                                formControlName="password" autocomplete="new-password" />
                              <span *ngIf="show_password" class="input-group-addon" id="basic-addon2"><i class="ion-eye"
                                  (click)="togglePassword1()"></i></span>

                              <ng-template #hidePassword>
                                <input type="password" autocomplete="new-password" class="form-control"
                                  formControlName="password" />
                                <span class="input-group-addon" id="basic-addon2"><i class="ion-eye-disabled"
                                    (click)="togglePassword(driverForm.value)"></i></span>
                              </ng-template>

                            </div>
                            <span class="error-message" style="position: absolute !important"
                              *ngIf="driverForm.get('password').getError('required') && submitted"> Please
                              provide password
                            </span>
                            <div *ngIf="f.password.errors">
                              <span id="txt" class="error-message" *ngIf="f.password.errors.pattern">At least one
                                lowercase
                                letter, one Uppercase letter, one numeric digit and length greater than 8</span>
                            </div>
                          </div>

                        </div> -->


                      </div>

                      <div [hidden]="(selectedRole !== EntityType.DRIVER)" class="col-sm-6 margin-top-25">
                        <div class="checkbox-custom checkbox-primary ">
                          <input type="checkbox" id="checkbox1" name="inputRadios" formControlName="speed" />
                          <label for="checkbox1">Driver Administrative Rights</label>
                        </div>
                      </div>

                    </div>

                    <div class="col-lg-4">
                      <!-- <div class="padding-20 padding-bottom-0 padding-top-0">
                        <div class="form-group">
                          <label class="control-label">Picture </label>
                          <div class="input-icon">
                            <div class="margin-bottom-10" id="preview">
                              <div class="container1">
                                <img #img [src]="avatar_url? avatar_url : '/assets/images/iol/driver_placeholder.png'"
                                  class="img-rounded img-bordered img-bordered-green" width="150px" height="150px">
                                <div class="middle col-md-7">
                                  <button *ngIf="avatar_url" type="button" class="btn btn-sm btn-primary">Remove
                                  </button>
                                </div>
                              </div>
                            </div>
                            <input *ngIf="!avatar_url" #myInput type="file" accept="image/*"
                              (change)="fileChange($event)" class="btn btn-default btn-block">
                          </div>
                          <span>
                            <div class="alert alert-danger padding-8" *ngIf="notImage">Please choose only (/jpg, .png
                              images)</div>
                          </span>
                        </div>
                      </div> -->
                    </div>
                  </div>
                </fieldset>

              </form>
            </div>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default btn-round btn-block1" #closeForm data-dismiss="modal"
          (click)="close()">Close</button>
        <button type="submit" class="btn btn-success btn-round btn-block1" [disabled]="btnLoading"
          form="driverFormID">{{btnText}}</button>
        <!-- [disabled]="inactiveRecord || !driverForm.valid || btnLoading || notImage" -->
      </div>
    </div>
  </div>
</div>

<div #formModal2 class="modal fade  modal-success text-left" id="bulkUploadModal" role="dialog" tabindex="-1">
  <div class="modal-dialog modal-center">
    <div class="modal-content">
      <div class="modal-header" [ngStyle]="theme">
        <button type="button" class="close" (click)="submitted = false" data-dismiss="modal">
          <span>x</span>
        </button>
        <h4 class="modal-title">Bulk Upload</h4>
      </div>
      <div class="modal-body">
        <div class="row">
          <div class="col-lg-12">
            <form novalidate [formGroup]="bulkUploadForm" id="bulkUploadFormID"
              (ngSubmit)="bulkUploadSubmit(bulkUploadForm.value)">
              <div class="row">
                <div class="col-lg-12">
                  <div class="padding-20 padding-bottom-0 padding-top-0">
                    <div class="form-group">
                      <button class="file-upload-btn" type="button"
                        onclick="$('.file-upload-input').trigger( 'click' )">
                        Browse
                      </button>

                      <span class="fileName-padding" *ngIf="selectedFileName != '' && !notCSVExcel">
                        {{selectedFileName}}
                      </span>

                      <span class="alert alert-danger fileName-padding" *ngIf="notCSVExcel">
                        Please choose excel file only - file format: .xls
                      </span>

                      <div class="image-upload-wrap">
                        <input class="file-upload-input" type='file' (change)="fileChange($event)"
                          accept=".ms-excel, .xls" formControlName="csvFiles" />
                        <!--.ms-excel, .xlsx-->

                        <div class="drag-text">
                          <h4>Drag and drop your excel file here</h4>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </form>
          </div>
        </div>
      </div>

      <div class="modal-footer">
        <div class="col-md-12">
          <div class="col-md-6 text-left">
            Download <a href="../assets/doc/StaffBulkUpload.xls">Sample</a>
            file here
            <p *ngIf="rejectedUsersList.length>0">Download <a (click)="downloadRejectedUser()">Rejected Users</a> List
            </p>

            <p *ngIf="rejectedUsersList.length>0"> Rejected Count: <b>{{bulkUploadApiResponse.rejected_count}}</b> |
              Created Count: <b>{{bulkUploadApiResponse.created_counts}}</b>
            </p>
          </div>
          <div class="col-md-6">
            <button type="button" #closeFormBulk (click)="submitted = false"
              class="btn btn-default btn-round btn-block1" data-dismiss="modal">Close
            </button>
            <button type="submit" class="btn btn-primary btn-round btn-block1" form="bulkUploadFormID"
              [disabled]="disabledButton">Upload
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
