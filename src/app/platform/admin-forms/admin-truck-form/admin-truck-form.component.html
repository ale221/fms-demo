<app-unauthorized-page (isAuthorized)="isAuthorizedUser($event)" *ngIf="!isAuthorized"></app-unauthorized-page>

<div [className]="sidebarCheck ? 'half-open-breadcrum breadcrumb-box' : 'full-open-breadcrum breadcrumb-box' "
  #scrollToTop [hidden]="!isAuthorized">
  <ol class="breadcrumb breadcrumb-arrow ">
    <li><a class="icon ion-ios-home" routerLink="/iol"> Dashboard </a> </li>
    <!-- <li *ngIf="!breadcrumbInner=='' "><a routerLink="/iol/{{breadcrumbInner[0]}}"> {{breadcrumbInner[1]}} </a></li> -->
    <li><a> Manage Fleets</a></li>
    <!-- <li><a routerLink="/iol/admin/truck">Manage Fleets</a></li> -->
  </ol>
</div>

<div
  [className]="sidebarCheck ? 'half-open-sidebar page-content  container-fluid' : 'full-open-sidebar page-content  container-fluid' "
  style="padding-bottom:200px" [hidden]="!isAuthorized">
  <div class="panel-heading font-weight-600 margin-bottom-0">
  </div>
  <div class="panel-body padding-0">
    <div class="tab-content">
      <div class="tab-pane active" id="Summary">

        <div class="row">
          <!-- <div class="col-lg-4">
                <app-admin-filters [activePage]="activePage" [activeTab]="add_btn" [resetFilters]="resetFilters"
                  dataTarget="data-target">

                </app-admin-filters>
              </div> -->

          <div class="col-lg-4">
            <div class="panel panel-default round margin-bottom-0 ">
              <div class="panel-heading margin-bottom-0">
                <h3 class="panel-title font-weight-600 bg-teal-8001 white1 ">Choose Parameters</h3>
                <div class="panel-actions">
                  <a></a>
                </div>
              </div>
              <div class="panel-body padding-15">

                <div class="col-lg-12" style="padding:0px; margin-top: 10px; margin-bottom: 15px;">
                  <a></a>
                  <button type="button" *ngIf="add_btn == 0 && loggedInUser.read_only != true"
                    class="btn btn-lg   btn-primary  btn-block btncolor" (click)="clearForm()" data-target="#editpop1"
                    data-toggle="modal" style="font-size: 14px;border-radius: 20px;">
                    <i class="ri-add-circle-fill"></i> New Vehicle
                  </button>

                  <button type="button" *ngIf="add_btn == 1 && loggedInUser.read_only != true"
                    class="btn btn-lg   btn-primary  btn-block btncolor" (click)="clearForm()" data-target="#editpop2"
                    data-toggle="modal" style="font-size: 14px;border-radius: 20px;">
                    <i class="ri-add-circle-fill"></i> New Vehicle Type
                  </button>

                  <button type="button" *ngIf="add_btn == 2 && loggedInUser.read_only != true"
                    class="btn btn-lg   btn-primary  btn-block btncolor" (click)="clearForm()" data-target="#editpop3"
                    data-toggle="modal" style="font-size: 14px;border-radius: 20px;">
                    <i class="ri-add-circle-fill"></i> New Fleet
                  </button>

                  <button type="button" *ngIf="add_btn == 3 && loggedInUser.read_only != true"
                    class="btn btn-lg   btn-primary  btn-block btncolor" (click)="clearForm()" data-target="#editpop4"
                    data-toggle="modal" style="font-size: 14px;border-radius: 20px;">
                    <i class="ri-add-circle-fill"></i> New Category
                  </button>

                </div>


                <form [formGroup]="searchForm" (ngSubmit)="onSearch(searchForm.value)">
                  <fieldset class="form-fieldset" *ngIf="add_btn==0 || add_btn==2 || add_btn==3">
                    <legend *ngIf="add_btn==0">Vehicle</legend>
                    <div class="form-group" *ngIf="add_btn==0 || add_btn==2 || add_btn==3">
                      <select class="form-control select2" formControlName="fleet_id" placeholder="Select Fleet"
                        (change)="fleetDropdownChanged($event.target.value,add_btn)">
                        <option value="">Select Fleet</option>
                        <option *ngFor="let fleet of fleets2" [value]="fleet.id">{{fleet.name}}</option>
                      </select>
                    </div>
                    <div class="form-group" *ngIf="add_btn==0">

                      <p-multiSelect [options]="driver_list" name="driver_id" formControlName="driver_id"
                        optionLabel="name" styleClass="prime-dropdown" filter="true"
                        (onChange)="driverDropdownChanged($event)" filterPlaceHolder="Search"
                        defaultLabel="Select Driver" placeholder="Select hDriver">
                      </p-multiSelect>
                    </div>
                    <div class="form-group" *ngIf="add_btn==0" style="margin-bottom: 0px;">
                      <select class="form-control select2" formControlName="category_id" placeholder="Select Category"
                        (change)="categoryDropdownChanged($event.target.value)">
                        <option value="">Select Category</option>
                        <option *ngFor="let cate of category_list" [value]="cate.id">{{cate.name}}</option>
                      </select>
                    </div>
                  </fieldset>

                  <fieldset class="form-fieldset" *ngIf="add_btn==0 || add_btn==1 ">
                    <legend *ngIf="add_btn==0 || add_btn==1 ">Vehicle Type</legend>
                    <select class="form-control select2" formControlName="entity_sub_type_id"
                      placeholder="Select Vehicle Type" (change)="typeDropdownChanged($event.target.value,add_btn)">
                      <option value="">Select Vehicle Types</option>
                      <option *ngFor="let vehicle of vehicleTypesDropDown" [value]="vehicle.id">{{vehicle.label}}
                      </option>
                    </select>
                  </fieldset>

                </form>


                <div class="form-group" *ngIf="add_btn==0 || add_btn==1 || add_btn==2 || add_btn==3">
                  <form [formGroup]="searchForm" (ngSubmit)="onSearch(searchForm.value)">
                    <div class="form-group margin-bottom-10">
                      <fieldset class="form-fieldset">
                        <legend>Search</legend>

                        <div class="form-group margin-bottom-10">
                          <div class="input-search">
                            <i class="input-search-icon ri-search-line"></i>
                            <input type="text" class="form-control" formControlName="search" name=""
                              placeholder="Search...">
                            <button type="button" class="input-search-close icon " data-toggle="popover"
                              data-original-title="" data-trigger="hover" data-container="body" data-placement="top"
                              data-html="true" id="help2" [pTooltip]=ptoolTip tooltipPosition="top">
                              <i class="ri-question-line"></i>
                            </button>
                            <div id="popover-content-help2" class="hide">
                              Some help information goes here
                            </div>

                          </div>
                        </div>

                        <div class="form-group margin-bottom-0 text-center">
                          <button (click)="onSearch($event)" href="" type="submit"
                            class="btn btn-success btn-round btn-block1"> <i class=" ri-search-line "></i>
                            Search</button>
                          <button (click)="onClearSearch()" href=" " class="btn btn-default btn-round "> <i
                              class="ri-refresh-line "></i>
                            Clear
                          </button>
                        </div>
                      </fieldset>
                    </div>
                  </form>
                </div>
                <hr>



                <div class="form-group margin-bottom-0">
                  <label class="font-size-14 font-weight-600 ">{{exportVariable}}</label>
                  <div class="btn-group btn-group-justified">
                    <div class="btn-group" role="group">
                      <!-- [href]="downloadableLink" -->
                      <a (click)="downloadXLS(downloadableLink)">
                        <button type="button" class="btn btn-outline btn-default"> <img
                            src="../../../assets/images/icon-xls.png" height="50">
                          <!-- href="{{url}}/iof/driver_profile_report/?is_export=yes"   [disabled]="exportsid==true"-->
                          <div class="font-size-12">
                            <!-- [href]="downloadableLink" -->
                            <a>Download XLS</a>
                          </div>
                        </button>
                      </a>
                    </div>
                    <div class="btn-group" role="group">
                      <!-- [href]="downloadableLink1" -->
                      <a (click)="downloadPDF(downloadableLink1)">
                        <button type="button" class="btn btn-outline btn-default"> <img
                            src="../../../assets/images/icon-pdf.png" height="50">
                          <!-- [disabled]="exportsid==true"  -->
                          <div class="font-size-12">
                            <!-- [href]="downloadableLink1" -->
                            <a>Download PDF</a>
                          </div>
                        </button>
                      </a>
                    </div>

                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="col-lg-8">
            <div class="row">

              <div class="col-lg-12">
                <div class="panel panel-default round padding-0  card  light"
                  style="min-height: 200px; color: aliceblue;">

                  <mat-tab-group (selectedTabChange)="activeTabFuction($event)">
                    <!-- Vehicle List Tab -->
                    <mat-tab label="Vehicle List">
                      <div class="table-responsive margin-top-20 padding-15">
                        <p-progressBar *ngIf="showIndeterminateProgress" [style]="{'height': '3px'}"
                          mode="indeterminate"></p-progressBar>

                        <table matSort (matSortChange)="sortDataTrucks($event)"
                          class="table margin-bottom-0 table-condensed1 table-bordered1 text-wrap theme-table1"
                          style="border: 1px solid #ebebeb;" mat-table [dataSource]="trucks" mat-elevation-z8>
                          <ng-container matColumnDef="name">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header>Vehicle</th>
                            <td mat-cell *matCellDef="let row">
                              <div style="width: 120px; float: left">
                                <img [src]="row.photo" class="img-bordered pull-left margin-right-10" height="36px" />
                                <div class="media-body pointer" [routerLink]="gotoService.gotoTruck(row.id)">
                                  <a class="font-weight-600">{{ row.name || 'N/A' }}</a>
                                </div>
                              </div>
                            </td>
                          </ng-container>
                          <ng-container matColumnDef="status">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header>Status</th>
                            <td mat-cell *matCellDef="let row"><span class="label"
                                [ngClass]="(row.status === EntityStatusEnum.Active)? 'label-success': 'label-danger'">{{(row.status
                                === EntityStatusEnum.Active)? 'Active' : 'InActive'}}</span>
                            </td>
                            <!-- [ngClass]="(value === EntityStatusEnum.Active)? 'label-success': 'label-danger'">
                                                                      {{(value === EntityStatusEnum.Active)? 'Active' : 'Inactive'}} -->
                          </ng-container>
                          <ng-container matColumnDef="modified_by_name">
                            <th mat-header-cell *matHeaderCellDef>Modified By</th>
                            <td mat-cell *matCellDef="let row">
                              {{ row.modified_by_name }}</td>
                          </ng-container>
                          <ng-container matColumnDef="modified_datetime">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header>Modified Datetime</th>
                            <td mat-cell *matCellDef="let row">
                              {{ (row.modified_datetime * 1000 | date: 'M/d/yyyy, h:mm:ss a') || 'N/A' }}</td>
                          </ng-container>
                          <ng-container matColumnDef="created_datetime">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header>Created Datetime</th>
                            <td mat-cell *matCellDef="let row">
                              {{ (row.created_datetime * 1000 | date: 'M/d/yyyy, h:mm:ss a') || 'N/A' }}</td>
                          </ng-container>
                          <ng-container matColumnDef="customer_name">
                            <th mat-header-cell *matHeaderCellDef>Customer Name</th>
                            <td mat-cell *matCellDef="let row">{{ row.customer_name || 'N/A' }}</td>
                          </ng-container>
                          <ng-container matColumnDef="fleet">
                            <th mat-header-cell *matHeaderCellDef>Fleet</th>
                            <td mat-cell *matCellDef="let row">{{ row.fleet_name || 'N/A' }}</td>
                          </ng-container>
                          <ng-container matColumnDef="actions">
                            <th mat-header-cell *matHeaderCellDef>Actions</th>
                            <td mat-cell *matCellDef="let row">
                              <button *ngIf="loggedInUser.read_only != true" type="button"
                                class="btn btn-icon  btn-info btn-xs" [hidden]="disableButton(row)"
                                data-target="#editpop1" #testOpen (click)="openEditModal(row)" data-toggle="modal"
                                pTooltip="Edit">
                                <i class="icon ion-edit"></i>
                              </button>
                              <button *ngIf="loggedInUser.read_only != true" type="button" pTooltip="Delete "
                                class="btn btn-icon  btn-danger btn-xs" (click)="showSwal(row)"
                                data-original-title="Delete"> <i class="icon ion-android-delete"></i> </button>
                              <!-- (click)="showSwal(row)" -->
                            </td>
                          </ng-container>

                          <tr mat-header-row *matHeaderRowDef="displayedVehicleList"></tr>
                          <tr mat-row *matRowDef="let row; columns: displayedVehicleList;"></tr>
                        </table>
                        <div *ngIf="trucks?.length === 0 && !showIndeterminateProgress" class="no-records">No records
                          found</div>
                        <mat-paginator translate="no" #paginatorTrucks [length]="totalLengthTrucks"
                          [hidePageSize]="true" showFirstLastButtons (page)="onPaginateTruck($event)" [pageSize]="10">
                        </mat-paginator>
                      </div>
                    </mat-tab>

                    <!-- Vehicle Type Tab -->
                    <mat-tab label="Vehicle Type">
                      <div class="table-responsive margin-top-20 padding-15">
                        <p-progressBar *ngIf="showIndeterminateProgress" [style]="{'height': '3px'}"
                          mode="indeterminate"></p-progressBar>

                        <table matSort (matSortChange)="sortDataTrucksType($event)"
                          class="table margin-bottom-0 table-condensed1 table-bordered1 text-wrap theme-table1"
                          style="border: 1px solid #ebebeb;" mat-table [dataSource]="vehicleTypes" mat-elevation-z8>
                          <ng-container matColumnDef="label">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header>Type Name</th>
                            <td mat-cell *matCellDef="let row">
                              <!-- {{ row.label || 'N/A' }} -->
                              <div style="width: 120px; float: left">
                                <img [src]="row.marker" class="img-bordered pull-left margin-right-10" height="36px" />
                                {{ row.label || 'N/A' }}
                              </div>
                            </td>
                          </ng-container>
                          <ng-container matColumnDef="total_vehicles">
                            <th mat-header-cell *matHeaderCellDef>Vehicles</th>
                            <td mat-cell *matCellDef="let row">
                              {{ row.total_vehicles || 'N/A' }}
                            </td>
                          </ng-container>

                          <ng-container matColumnDef="modified_by_name">
                            <th mat-header-cell *matHeaderCellDef>Modified By</th>
                            <td mat-cell *matCellDef="let row">{{ row.modified_by_name || 'N/A' }}</td>
                          </ng-container>
                          <ng-container matColumnDef="modified_datetime">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header>Modified Datetime</th>
                            <td mat-cell *matCellDef="let row">
                              {{ (row.modified_datetime * 1000 | date: 'M/d/yyyy, h:mm:ss a') || 'N/A' }}</td>
                          </ng-container>
                          <ng-container matColumnDef="created_datetime">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header>Created Datetime</th>
                            <td mat-cell *matCellDef="let row">
                              {{ (row.created_datetime * 1000 | date: 'M/d/yyyy, h:mm:ss a') || 'N/A' }}</td>
                          </ng-container>
                          <ng-container matColumnDef="actions">
                            <th mat-header-cell *matHeaderCellDef>Actions</th>
                            <td mat-cell *matCellDef="let row" style="text-align: center;">
                              <button *ngIf="loggedInUser.read_only != true" type="button"
                                class="btn btn-icon  btn-info btn-xs" [hidden]="disableButton(row)"
                                data-target="#editpop2" (click)="openEditModalType(row)" data-toggle="modal"
                                pTooltip="Edit">
                                <i class="icon ion-edit"></i>
                              </button>
                              <button *ngIf="loggedInUser.read_only != true" type="button" pTooltip="Delete "
                                class="btn btn-icon  btn-danger btn-xs"
                                (click)="showDeleteCategoryConfirmation(row.id, 'vehicle_type')"
                                data-original-title="Delete"> <i class="icon ion-android-delete"></i> </button>
                            </td>
                          </ng-container>

                          <tr mat-header-row *matHeaderRowDef="displayedVehicleType"></tr>
                          <tr mat-row *matRowDef="let row; columns: displayedVehicleType;"></tr>
                        </table>
                        <div *ngIf="vehicleTypes?.length === 0 && !showIndeterminateProgress" class="no-records">No
                          records found</div>
                        <mat-paginator translate="no" #paginatorTrucksTypes [length]="totalLengthTrucksType"
                          [hidePageSize]="true" showFirstLastButtons (page)="onPaginateTruckType($event)"
                          [pageSize]="10">
                        </mat-paginator>
                      </div>
                    </mat-tab>

                    <!-- Fleet Tab -->
                    <mat-tab label="Fleet">
                      <!-- <div class="clearfix margin-top-10 margin-bottom-10" style="color: #76838f;">
                            <app-reporting-buttons [calendarDimension]="'row padding-0 col-sm-9'" [type]="'trail'"
                              [timeRange]="true" [hideBtn]="'today yesterday week month'"></app-reporting-buttons>
                          </div> -->

                      <div class="table-responsive margin-top-20 padding-15">
                        <p-progressBar *ngIf="showIndeterminateProgress" [style]="{'height': '3px'}"
                          mode="indeterminate"></p-progressBar>

                        <table matSort (matSortChange)="sortDataFleet($event)"
                          class="table margin-bottom-0 table-condensed1 table-bordered1 text-wrap theme-table1"
                          style="border: 1px solid #ebebeb;" mat-table [dataSource]="fleets2" mat-elevation-z8>
                          <ng-container matColumnDef="name">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header>Fleet Name</th>
                            <td mat-cell *matCellDef="let row">
                              {{ row.name || 'N/A' }}
                            </td>
                          </ng-container>
                          <ng-container matColumnDef="total_vehicles">
                            <th mat-header-cell *matHeaderCellDef>Vehicles</th>
                            <td mat-cell *matCellDef="let row">
                              {{ row.total_vehicle || 'N/A' }}
                            </td>
                          </ng-container>

                          <ng-container matColumnDef="modified_by_name">
                            <th mat-header-cell *matHeaderCellDef>Modified By</th>
                            <td mat-cell *matCellDef="let row">{{ row.modified_by_name || 'N/A' }}</td>
                          </ng-container>
                          <ng-container matColumnDef="modified_at">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header>Modified Datetime</th>
                            <td mat-cell *matCellDef="let row">
                              {{ (row.modified_at * 1000 | date: 'M/d/yyyy, h:mm:ss a') || 'N/A' }}</td>
                          </ng-container>
                          <ng-container matColumnDef="created_at">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header>Created Datetime</th>
                            <td mat-cell *matCellDef="let row">
                              {{ (row.created_at * 1000 | date: 'M/d/yyyy, h:mm:ss a') || 'N/A' }}</td>
                          </ng-container>
                          <ng-container matColumnDef="customer_name">
                            <th mat-header-cell *matHeaderCellDef>Customer</th>
                            <td mat-cell *matCellDef="let row">{{ row.customer_name || 'N/A' }}</td>
                          </ng-container>
                          <ng-container matColumnDef="actions">
                            <th mat-header-cell *matHeaderCellDef>Actions</th>
                            <td mat-cell *matCellDef="let row">
                              <button *ngIf="loggedInUser.read_only != true" type="button"
                                class="btn btn-icon  btn-info btn-xs" [hidden]="disableButton(row)"
                                data-target="#editpop3" (click)="openEditModalFleet(row)" data-toggle="modal"
                                pTooltip="Edit">
                                <i class="icon ion-edit"></i>
                              </button>
                              <button *ngIf="loggedInUser.read_only != true" type="button" pTooltip="Delete "
                                class="btn btn-icon  btn-danger btn-xs"
                                (click)="showDeleteCategoryConfirmation(row.id, 'fleet')" data-original-title="Delete">
                                <i class="icon ion-android-delete"></i>
                              </button>
                              <!-- (click)="showSwalfleet(row)" -->
                            </td>
                          </ng-container>

                          <tr mat-header-row *matHeaderRowDef="displayedFleet"></tr>
                          <tr mat-row *matRowDef="let row; columns: displayedFleet;"></tr>
                        </table>
                        <div *ngIf="fleets?.length === 0 && !showIndeterminateProgress" class="no-records">No records
                          found</div>
                        <mat-paginator translate="no" #paginatorFleet [length]="totalLengthFleet" [hidePageSize]="true"
                          showFirstLastButtons [pageSize]="10" (page)="onPaginateFleet($event)">
                        </mat-paginator>
                      </div>
                    </mat-tab>

                    <!-- Category Tab -->
                    <mat-tab label="Category">

                      <div class="table-responsive margin-top-20 padding-15">
                        <p-progressBar *ngIf="showIndeterminateProgress" [style]="{'height': '3px'}"
                          mode="indeterminate"></p-progressBar>
                        <table matSort (matSortChange)="sortDataCategory($event)"
                          class="table margin-bottom-0 table-condensed1 table-bordered1 text-wrap theme-table1"
                          style="border: 1px solid #ebebeb;" mat-table [dataSource]="category_list" mat-elevation-z8>
                          <ng-container matColumnDef="name">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header>Category Name</th>
                            <td mat-cell *matCellDef="let row">
                              {{ row.name || 'N/A' }}
                            </td>
                          </ng-container>

                          <ng-container matColumnDef="fleet_name">
                            <th mat-header-cell *matHeaderCellDef>Fleet Name</th>
                            <td mat-cell *matCellDef="let row">{{ row.fleet_name || 'N/A' }}</td>
                          </ng-container>
                          <ng-container matColumnDef="modified_by_name">
                            <th mat-header-cell *matHeaderCellDef>Modified By</th>
                            <td mat-cell *matCellDef="let row">{{ row.modified_by_name || 'N/A' }}</td>
                          </ng-container>
                          <ng-container matColumnDef="modified_at">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header>Modified Datetime</th>
                            <td mat-cell *matCellDef="let row">
                              {{ (row.modified_at * 1000 | date: 'M/d/yyyy, h:mm:ss a') || 'N/A' }}</td>
                          </ng-container>
                          <ng-container matColumnDef="created_at">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header>Created Datetime</th>
                            <td mat-cell *matCellDef="let row">
                              {{ (row.created_at * 1000 | date: 'M/d/yyyy, h:mm:ss a') || 'N/A' }}</td>
                          </ng-container>
                          <ng-container matColumnDef="customer_name">
                            <th mat-header-cell *matHeaderCellDef>Customer</th>
                            <td mat-cell *matCellDef="let row">{{ row.customer_name || 'N/A' }}</td>
                          </ng-container>
                          <ng-container matColumnDef="actions">
                            <th mat-header-cell *matHeaderCellDef>Actions</th>
                            <td mat-cell *matCellDef="let row">
                              <button *ngIf="loggedInUser.read_only != true" type="button"
                                class="btn btn-icon  btn-info btn-xs" [hidden]="disableButton(row)"
                                data-target="#editpop4" (click)="openEditModalCategory(row)" data-toggle="modal"
                                pTooltip="Edit">
                                <i class="icon ion-edit"></i>
                              </button>
                              <button *ngIf="loggedInUser.read_only != true" type="button" pTooltip="Delete "
                                class="btn btn-icon  btn-danger btn-xs"
                                (click)="showDeleteCategoryConfirmation(row.id, 'category')"
                                data-original-title="Delete"> <i class="icon ion-android-delete"></i>
                              </button>
                              <!-- (click)="showSwalCategory(row)" -->
                            </td>
                          </ng-container>
                          <tr mat-header-row *matHeaderRowDef="displayedCategory"></tr>
                          <tr mat-row *matRowDef="let row; columns: displayedCategory;"></tr>
                        </table>
                        <div *ngIf="category_list?.length === 0 && !showIndeterminateProgress" class="no-records">No
                          records found</div>
                        <mat-paginator translate="no" #paginatorStatistics [length]="totalLengthCategory"
                          [hidePageSize]="true" showFirstLastButtons [pageSize]="10"
                          (page)="onPaginateCategory($event)"></mat-paginator>
                      </div>
                    </mat-tab>
                  </mat-tab-group>
                </div>
              </div>

            </div>
          </div>

        </div>
      </div>
    </div>
  </div>
</div>

<div #vehicleListModal class="modal fade  modal-success text-left" id="editpop1" role="dialog" tabindex="-1">
  <div class="modal-dialog modal-center  modal-lg">
    <div class="modal-content">
      <div class="modal-header" [ngStyle]="theme">
        <button type="button" class="close" data-dismiss="modal">
          <span>x</span>
        </button>
        <h4 class="modal-title">{{inactiveRecord? 'View Vehicle' : formTitle}}</h4>
      </div>
      <div class="modal-body">
        <div class="">
          <div class="row">
            <div class="col-lg-12">
              <form novalidate [formGroup]="truckForm" id="truckFormID" (ngSubmit)="onSubmit(truckForm.value)">
                <fieldset [disabled]="inactiveRecord">
                  <div class="row">
                    <div class="col-lg-9">
                      <div class="row">
                        <div class="col-lg-4 col-sm-6">
                          <div class="form-group">
                            <label class="control-label form-label">Reg #<span class="text-danger2">*</span></label>
                            <div class="input-icon">
                              <input class="form-control" formControlName="name" maxlength="12" />

                              <span class="error-message"
                                *ngIf="truckForm.get('name').getError('required') && vehicleSubmitted">
                                Please provide reg #
                              </span>

                              <span class="error-message"
                                *ngIf="truckForm.get('name').getError('isAlphabetsAndNumbers') && vehicleSubmitted">Enter
                                alphabets/numbers only</span>
                            </div>
                          </div>
                        </div>

                        <div class="col-lg-4 col-sm-6">
                          <div class="form-group   ">
                            <label class="control-label form-label">Engine #<span class="text-danger2">*</span></label>
                            <div class="input-icon">
                              <input class="form-control" formControlName="engine_number" maxlength="25" />

                              <span class="error-message"
                                *ngIf="truckForm.get('engine_number').getError('required') && vehicleSubmitted">
                                Please provide engine #
                              </span>

                              <span class="error-message"
                                *ngIf="truckForm.get('engine_number').getError('isAlphabetsAndNumbers') && vehicleSubmitted">Enter
                                alphabets/numbers only</span>

                            </div>
                          </div>
                        </div>

                        <div class="col-lg-4 col-sm-6">
                          <div class="form-group">
                            <label class="control-label form-label">Chassis #<span class="text-danger2">*</span></label>
                            <div class="input-icon">
                              <input class="form-control" formControlName="chassis_number" maxlength="25" />

                              <span class="error-message"
                                *ngIf="truckForm.get('chassis_number').getError('required') && vehicleSubmitted">
                                Please provide chassis #
                              </span>

                              <span class="error-message"
                                *ngIf="truckForm.get('chassis_number').getError('isAlphabetsAndNumbers') && vehicleSubmitted">Enter
                                alphabets/numbers only</span>


                            </div>
                          </div>
                        </div>
                      </div>

                      <div class="row">
                        <div class="col-lg-4 col-sm-6">
                          <div class="form-group">
                            <label class="control-label form-label">Make<span class="text-danger2">*</span></label>
                            <div class="input-icon">
                              <input class="form-control" formControlName="make" maxlength="25" />

                              <span class="error-message"
                                *ngIf="truckForm.get('make').getError('required') && vehicleSubmitted">
                                Please provide make
                              </span>

                              <span class="error-message"
                                *ngIf="truckForm.get('make').getError('isAlphabetsAndNumbers') && vehicleSubmitted">
                                Enter alphabets/numbers only
                              </span>

                            </div>
                          </div>
                        </div>

                        <div class="col-lg-4 col-sm-6">
                          <div class="form-group">
                            <label class="control-label form-label">Model<span class="text-danger2">*</span></label>
                            <div class="input-icon">
                              <input class="form-control" formControlName="model" maxlength="25" />

                              <span class="error-message"
                                *ngIf="truckForm.get('model').getError('required') && vehicleSubmitted">
                                Please provide model
                              </span>

                              <span class="error-message"
                                *ngIf="truckForm.get('model').getError('isAlphabetsAndNumbers') && vehicleSubmitted">
                                Enter alphabets/numbers only</span>
                            </div>
                          </div>
                        </div>

                        <div class="col-lg-4 col-sm-6">
                          <div class="form-group">
                            <label class="control-label form-label">Year<span class="text-danger2">*</span></label>
                            <div class="input-icon">
                              <input class="form-control" min="1950" max={{currentYear}} formControlName="year"
                                type="number" />

                              <span class="error-message"
                                *ngIf="truckForm.get('year').getError('required') && vehicleSubmitted">
                                Please provide year
                              </span>

                              <span class="error-message" *ngIf="truckForm.get('year').getError('max')">Select year
                                between {{minYear}} - {{currentYear}}</span>
                              <span class="error-message" *ngIf="truckForm.get('year').getError('min')">Select year
                                between {{minYear}} - {{currentYear}}</span>
                            </div>
                          </div>
                        </div>
                      </div>

                      <div class="row">
                        <div class="col-lg-4 col-sm-6">
                          <div class="form-group">
                            <label class="control-label form-label">Color<span class="text-danger2">*</span></label>
                            <div class="input-icon">
                              <input class="form-control" formControlName="color" [pattern]="namePattern"
                                maxlength="25" />

                              <span class="error-message"
                                *ngIf="truckForm.get('color').getError('required') && vehicleSubmitted">
                                Please provide color
                              </span>
                            </div>
                          </div>
                        </div>

                        <div class="col-lg-4 col-sm-6">
                          <div class="form-group">
                            <label class="control-label form-label">ODO<span class="text-danger2">*</span></label>
                            <!-- <input type="text"
                              oninput="this.value = !!this.value && this.value >= 0 ? this.value : null; if (this.value.length > this.maxLength) this.value = this.value.slice(0, this.maxLength);"
                              maxlength="6" class="form-control" min="0" formControlName="odo_reading" /> -->
                            <input class="form-control" min="0" formControlName="odo_reading"
                              onkeydown="if(event.key==='.'){event.preventDefault();}"
                              oninput="this.value = !!this.value && this.value >= 0 ? this.value : null; if (this.value.length > this.maxLength) this.value = this.value.slice(0, this.maxLength);"
                              maxlength="6" type="number" />
                            <span class="error-message"
                              *ngIf="truckForm.get('odo_reading').getError('required') && vehicleSubmitted">
                              Please provide ODO
                            </span>

                          </div>
                        </div>

                        <div class="col-lg-4 col-sm-6">
                          <div class="form-group">
                            <label class="control-label form-label">Engine Capacity<span
                                class="text-danger2">*</span></label>
                            <input class="form-control" min="0" formControlName="engine_capacity"
                              onkeydown="if(event.key==='.'){event.preventDefault();}"
                              oninput="this.value = !!this.value && this.value >= 0 ? this.value : null; if (this.value.length > this.maxLength) this.value = this.value.slice(0, this.maxLength);"
                              maxlength="5" type="number" />
                            <span class="error-message"
                              *ngIf="truckForm.get('engine_capacity').getError('required') && vehicleSubmitted">
                              Please provide engine capacity
                            </span>
                          </div>
                        </div>
                      </div>

                      <div class="row">
                        <div class="col-lg-4 col-sm-6">
                          <div class="form-group">
                            <label class="control-label form-label">Wheels<span class="text-danger2">*</span></label>
                            <input class="form-control" formControlName="wheels"
                              oninput="this.value = !!this.value && this.value >= 0 ? this.value : null; if (this.value.length > this.maxLength) this.value = this.value.slice(0, this.maxLength);"
                              maxlength="2" type="text">

                            <span class="error-message"
                              *ngIf="truckForm.get('wheels').getError('required') && vehicleSubmitted">
                              Please provide wheels
                            </span>

                            <div
                              *ngIf="truckForm.get('wheels').getError('isEven') || truckForm.get('wheels').getError('min') && vehicleSubmitted">

                              <span class="error-message" *ngIf="truckForm.get('wheels').getError('isEven')">
                                Please provide even number
                              </span>
                              <br>
                              <span class="error-message" *ngIf="truckForm.get('wheels').getError('min')">
                                Provide a number greater or equal to 2</span>
                            </div>
                          </div>
                        </div>

                        <div class="col-lg-4 col-sm-6">
                          <div class="form-group">
                            <label class="control-label form-label">Fuel Tank Capacity (liters)<span
                                class="text-danger2">*</span></label>
                            <input class="form-control" formControlName="volume_capacity" maxlength="10"
                              oninput="this.value = !!this.value && this.value >= 0 ? this.value : null; if (this.value.length > this.maxLength) this.value = this.value.slice(0, this.maxLength);"
                              type="text" min="0" />

                            <span class="error-message"
                              *ngIf="truckForm.get('volume_capacity').getError('required') && vehicleSubmitted">
                              Please provide fuel capacity
                            </span>

                            <span class="error-message"
                              *ngIf="truckForm.get('volume_capacity').getError('min') && vehicleSubmitted">
                              Please provide a number greater or equal 0</span>
                          </div>
                        </div>

                        <div class="col-lg-4 col-sm-6">
                          <div class="form-group">
                            <label class="control-label form-label">Type of Purchase<span
                                class="text-danger2">*</span></label>
                            <p-dropdown [(ngModel)]="selectedPurchase" *ngIf="!inactiveRecord" [options]="purchaseTypes"
                              formControlName="leased_owned" name="selectedType" styleClass="prime-dropdown"
                              placeholder="Select Purchase Type">
                            </p-dropdown>
                            <input *ngIf="inactiveRecord" class="form-control" formControlName="leased_owned" />

                            <span class="error-message"
                              *ngIf="truckForm.get('leased_owned').getError('required') && vehicleSubmitted">
                              Please provide type of purchase
                            </span>
                          </div>
                        </div>
                      </div>

                      <div class="row">
                        <div class="col-lg-4 col-sm-6">
                          <div class="form-group">
                            <label class="control-label form-label">Type of Vehicle<span
                                class="text-danger2">*</span></label>
                            <p-dropdown [(ngModel)]="truckType" *ngIf="!inactiveRecord" [options]="truckTypes"
                              formControlName="entity_sub_type" name="truckType" styleClass="prime-dropdown"
                              [readonly]="false" placeholder="Select Vehicle type">
                            </p-dropdown>
                            <input *ngIf="inactiveRecord" class="form-control" formControlName="entity_sub_type" />

                            <span class="error-message"
                              *ngIf="truckForm.get('entity_sub_type').getError('required') && vehicleSubmitted">
                              Please provide type of vehicle
                            </span>

                          </div>
                        </div>

                        <div class="col-lg-4 col-sm-6">
                          <div class="form-group">
                            <label class="control-label form-label">Device Attached <span
                                class="text-danger2">*</span></label>

                            <p-dropdown [options]="customerDevices" formControlName="device_name" name="device_name"
                              [(ngModel)]="selectedDevice" optionLabel="name" styleClass="prime-dropdown"
                              [readonly]="false" filter="true" [scrollHeight]="'120px'" filterPlaceholder="Search"
                              placeholder="Select Device">
                            </p-dropdown>

                            <!--*ngIf="!inactiveRecord"-->
                            <!-- <input class="form-control" formControlName="device_name" /> -->
                            <!--*ngIf="inactiveRecord"-->

                            <span class="error-message"
                              *ngIf="truckForm.get('device_name').getError('required') && vehicleSubmitted">
                              Please provide device attached
                            </span>

                          </div>
                        </div>

                        <div class="col-lg-4 col-sm-6">
                          <div class="form-group">
                            <label class="control-label form-label">Date Commissioned<span
                                class="text-danger2">*</span></label>

                            <p-calendar [readonlyInput]="false" [(ngModel)]="startDateTime" name="start_datetime"
                              [showTime]="false" [maxDate]="maxDate" formControlName="date_commissioned"
                              styleClass="prime-datetime" hourFormat="12" [stepMinute]="5">
                            </p-calendar>

                          </div>
                          <span class="error-message" style="margin-top: -23px;"
                            *ngIf="truckForm.get('date_commissioned').getError('required') && vehicleSubmitted">
                            Please provide date commissioned
                          </span>
                        </div>

                        <div class="col-lg-4 col-sm-6">
                          <div class="form-group">
                            <label class="control-label form-label">Fleet</label>
                            <div class="form-group">
                              <p-dropdown [options]="fleets2" formControlName="fleet" name="fleets2"
                                [(ngModel)]="fleetType" (onChange)="fleetDropdown($event)" optionLabel="name"
                                styleClass="prime-dropdown" [readonly]="false" filter="true" [scrollHeight]="'120px'"
                                filterPlaceholder="Search" placeholder="Select Fleet">
                              </p-dropdown>
                              <!-- <span class="error-message"
                                *ngIf="truckForm.get('fleet').getError('required') && vehicleSubmitted">
                                Please provide Fleet
                              </span> -->
                            </div>
                          </div>
                        </div>

                        <div class="col-lg-4 col-sm-6">
                          <div class="form-group">
                            <label class="control-label form-label">Category</label>
                            <div class="form-group">
                              <p-dropdown [options]="categories" formControlName="category" name="categories"
                                [(ngModel)]="categoryType" optionLabel="name" styleClass="prime-dropdown"
                                [readonly]="false" filter="true" [scrollHeight]="'120px'" filterPlaceholder="Search"
                                placeholder="Select Category">
                              </p-dropdown>
                              <!-- <span class="error-message"
                                *ngIf="truckForm.get('category').getError('required') && vehicleSubmitted">
                                Please provide Category
                              </span> -->
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>

                    <div class="col-lg-3">
                      <div class="padding-20 padding-bottom-0 padding-top-0">
                        <div class="form-group">
                          <label class="control-label">Picture </label>
                          <div class="input-icon">
                            <div class="margin-bottom-10" id="preview">
                              <div class="container1">
                                <img #img [src]="avatar_url? avatar_url : '/assets/images/iol/icon_trucks.png'"
                                  class="img-rounded img-bordered img-bordered-green" width="150px" height="150px">
                                <div class="middle col-md-7">
                                  <button *ngIf="avatar_url" type="button" class="btn btn-sm btn-primary"
                                    (click)="removeImage()">Remove
                                  </button>
                                </div>
                              </div>
                            </div>
                            <input *ngIf="!avatar_url" #myInput type="file" accept="image/*"
                              (change)="fileChange($event)" class="btn btn-default btn-block">
                            <!-- formControlName="photo_method" -->
                          </div>
                          <span>
                            <div class="alert alert-danger padding-8" *ngIf="notImage">Please choose only (/jpg, .png
                              images)</div>
                          </span>
                        </div>
                      </div>
                    </div>
                  </div>

                  <div class="row">

                  </div>

                  <div class="row col-lg-12 fieldset-form">
                    <fieldset>
                      <h4>Enable Violation
                        <!-- <i pTooltip="This option enables violation notifications when truck speed exceeds given threshold."
                          class="fa fa-info-circle font-size-12 grey-400"></i> -->

                        <!--
<a pTooltip="This option enables violation notifications when truck speed exceeds given threshold">
  <i class="info-icon ri-information-line"></i>
</a> -->

                      </h4>
                      <div class="row">
                        <div class="col-lg-6">
                          <div class="row">
                            <div class="col-sm-3">
                              <div class="inline-block">
                                <div class="checkbox-custom checkbox-primary ">
                                  <input formControlName="speed" type="checkbox" id="checkbox1"
                                    (change)="speedChanged($event)" name="inputRadios" />
                                  <label for="checkbox1">Speed</label>
                                </div>
                              </div>
                            </div>
                            <div class="col-sm-9" *ngIf="truckForm.value.speed">
                              <div style="display: flex; align-items: centery;" class="input-icon">
                                <input class="form-control" formControlName="speed_threshold" placeholder="Threshold"
                                  type="number" />
                                <span class="margin-left-10">Km/h</span>
                              </div>

                              <span class="error-message"
                                *ngIf="truckForm.get('speed_threshold').getError('required') && vehicleSubmitted">
                                <p style="margin-bottom: 5px!important">Threshold
                                  is required. </p>
                              </span>

                              <!-- <span class="error-message" *ngIf="threshold_required && vehicleSubmitted">
                                <p class="margin-bottom-5" style="margin-bottom: 5px!important">Threshold is required
                                </p>
                              </span> -->

                            </div>
                          </div>
                        </div>
                      </div>

                      <div class="row" style="margin-top: 14px;">
                        <div class="col-sm-9">
                          <div class="inline-block">
                            <div class="checkbox-custom checkbox-primary margin-right-25">
                              <input formControlName="harsh_acceleration" type="checkbox" id="checkbox2"
                                name="harsh_acceleration" />
                              <label for="checkbox2">Harsh Acceleration</label>
                            </div>
                          </div>

                          <div class="inline-block">
                            <div class="checkbox-custom checkbox-primary margin-right-25">
                              <input formControlName="harsh_breaking" type="checkbox" id="checkbox3"
                                name="harsh_breaking" />
                              <label for="checkbox3">Harsh Braking</label>
                            </div>
                          </div>

                          <div class="inline-block">
                            <div class="checkbox-custom checkbox-primary margin-right-25">
                              <input formControlName="territory" type="checkbox" id="checkbox4" name="territory" />
                              <label for="checkbox4">Geozone</label>
                            </div>
                          </div>

                          <div class="inline-block">
                            <div class="checkbox-custom checkbox-primary margin-right-25">
                              <input formControlName="sharp_turning" type="checkbox" id="checkbox5"
                                name="sharp_turning" />
                              <label for="checkbox5">Sharp Turning</label>
                            </div>
                          </div>
                        </div>

                      </div>
                    </fieldset>
                  </div>

                  <div class="row" *ngIf="truckForm.getRawValue().id">
                    <div class="col-lg-12">
                      <div class="form-group">
                        <label for="status" class="control-label"><b>Status</b></label>
                        <mat-slide-toggle formControlName="status" (change)="toggle($event)"></mat-slide-toggle>
                      </div>
                    </div>
                  </div>
                </fieldset>
              </form>
            </div>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default btn-round btn-block1" #closeForm
          data-dismiss="modal">Close</button>
        <button type="submit" class="btn btn-success btn-round btn-block1" form="truckFormID">{{btnText}}</button>


        <!-- [disabled]="!truckForm.valid || btnLoading || inactiveRecord" -->
      </div>
    </div>
  </div>
</div>

<div #vehicleTypeModal class="modal fade  modal-success text-left" id="editpop2" role="dialog" tabindex="-1">
  <div class="modal-dialog modal-center  modal-sm">
    <div class="modal-content">
      <div class="modal-header" [ngStyle]="theme">
        <button type="button" class="close" data-dismiss="modal">
          <span>x</span>
        </button>
        <h4 class="modal-title">{{inactiveRecordType? 'View Vehicle Type' : formTitleType}}</h4>
      </div>
      <div class="modal-body">
        <div class="">
          <div class="row">
            <div class="col-lg-12">
              <form novalidate [formGroup]="truckTypeForm" id="truckTypeFormID"
                (ngSubmit)="onSubmitType(truckTypeForm.value)">
                <fieldset [disabled]="inactiveRecord">
                  <div class="row">
                    <div class="form-group">

                      <div class="col-lg-12">
                        <div class="padding-bottom-0 padding-top-0"
                          style="display:flex; align-items: center;justify-content: center;">
                          <div class="form-group">
                            <label class="control-label">Picture<span class="text-danger2">*</span> </label>
                            <div class="input-icon">
                              <div class="margin-bottom-10" id="type_img">
                                <div class="container1">
                                  <img #img2 [src]="markerMC ? markerMC : '/assets/images/iol/icon_trucks.png'"
                                    class="img-rounded img-bordered img-bordered-green"
                                    style="width:150px; height:150px">
                                  <div class="middle col-md-7">
                                    <button *ngIf="markerMC" type="button" class="btn btn-sm btn-primary"
                                      (click)="removeImageType()">Remove
                                    </button>
                                  </div>
                                </div>
                              </div>
                              <input *ngIf="!markerMC" #myInputType type="file" accept="image/*"
                                (change)="fileChangetype($event)" class="btn btn-default btn-block">

                            </div>
                            <span>
                              <div class="alert alert-danger padding-8" *ngIf="notImage">Please choose only (/jpg, .png
                                images)</div>
                            </span>
                            <span class="error-message" *ngIf="!markerMC && vehicleTypeSubmitted">
                              Please provide Image
                            </span>
                          </div>
                        </div>
                      </div>
                    </div>

                    <div class="col-lg-12 col-sm-12">
                      <div class="form-group">
                        <label class="control-label form-label">Name<span class="text-danger2">*</span></label>
                        <div class="input-icon">
                          <input class="form-control" formControlName="label" maxlength="25" />

                          <span class="error-message"
                            *ngIf="truckTypeForm.get('label').getError('required') && vehicleTypeSubmitted">
                            Please provide name
                          </span>

                          <span class="error-message"
                            *ngIf="truckTypeForm.get('label').getError('isAlphabetsAndNumbers') && vehicleTypeSubmitted">
                            Enter alphabets/numbers only
                          </span>

                        </div>
                      </div>
                    </div>
                  </div>

                </fieldset>
              </form>
            </div>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default btn-round btn-block1" #closeFormtype
          data-dismiss="modal">Close</button>
        <button type="submit" class="btn btn-success btn-round btn-block1" form="truckTypeFormID"
          [disabled]=" btnLoading || inactiveRecordType">{{btnText}}</button>
      </div>
    </div>
  </div>
</div>

<div #fleetModal class="modal fade  modal-success text-left" id="editpop3" role="dialog" tabindex="-1">
  <div class="modal-dialog modal-center  modal-sm">
    <div class="modal-content">
      <div class="modal-header" [ngStyle]="theme">
        <button type="button" class="close" data-dismiss="modal">
          <span>x</span>
        </button>
        <h4 class="modal-title">{{inactiveRecordFleet? 'View Fleet' : formTitleFleet}}</h4>
      </div>
      <div class="modal-body">
        <div class="">
          <div class="row">
            <div class="col-lg-12">
              <form [formGroup]="FleetForm" id="FleetFormID" novalidate>
                <fieldset [disabled]="inactiveRecordFleet">
                  <div class="row">

                    <div class="col-lg-12 col-sm-12">
                      <div class="form-group">
                        <label class="control-label form-label">Name<span class="text-danger2">*</span></label>
                        <div class="input-icon">
                          <input class="form-control" formControlName="name" maxlength="25" />

                          <span class="error-message"
                            *ngIf="FleetForm.get('name').getError('required') && fleetSubmitted">
                            Please provide name
                          </span>

                          <span class="error-message"
                            *ngIf="FleetForm.get('name').getError('isAlphabetsAndNumbers') && fleetSubmitted">
                            Enter alphabets/numbers only
                          </span>

                        </div>
                      </div>
                    </div>
                    <div class="col-lg-12 col-sm-12">
                      <div class="form-group">
                        <label class="control-label">Vehicles<span class="text-danger2">*</span></label>
                        <!-- [(ngModel)]="selectedTruck" -->
                        <p-multiSelect [options]="vehicles_list" name="vehicle_name" formControlName="vehicle_name"
                          [(ngModel)]="selectedTruckoption" optionLabel="name" styleClass="prime-dropdown" filter="true"
                          filterPlaceHolder="Search" defaultLabel="Select Vehicles">
                        </p-multiSelect>

                        <span class="error-message"
                          *ngIf="FleetForm.get('vehicle_name').getError('required') && fleetSubmitted">
                          Please provide vehicle
                        </span>
                      </div>
                    </div>
                  </div>
                </fieldset>
              </form>
            </div>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default btn-round btn-block1" (click)=closeFleetForm() #closeFleet
          data-dismiss="modal">Close</button>

        <button type="submit" class="btn btn-success btn-round btn-block1" form="FleetForm"
          (click)="onSubmitFleet(FleetForm.value)">{{btnText}}</button>
        <!-- [disabled]=" btnLoading || inactiveRecordFleet" -->

      </div>
    </div>
  </div>
</div>

<div #categoryModal class="modal fade  modal-success text-left" id="editpop4" role="dialog" tabindex="-1">
  <div class="modal-dialog modal-center  modal-sm">
    <div class="modal-content">
      <div class="modal-header" [ngStyle]="theme">
        <button type="button" class="close" data-dismiss="modal">
          <span>x</span>
        </button>
        <h4 class="modal-title">{{inactiveRecordCategory? 'View Category' : formTitleCategory}}</h4>
      </div>
      <div class="modal-body">
        <div class="">
          <div class="row">
            <div class="col-lg-12">
              <form novalidate [formGroup]="CategoryForm" id="CategoryFormID">
                <fieldset [disabled]="inactiveRecordCategory">
                  <div class="row">

                    <div class="col-lg-12 col-sm-12">
                      <div class="form-group">
                        <label class="control-label form-label">Name<span class="text-danger2">*</span></label>
                        <div class="input-icon">
                          <input class="form-control" formControlName="name" maxlength="25" />
                          <span class="error-message"
                            *ngIf="CategoryForm.get('name').getError('required') && categorySubmitted">Please
                            provide name
                          </span>
                          <span class="error-message"
                            *ngIf="CategoryForm.get('name').getError('isAlphabetsAndNumbers') && categorySubmitted">
                            Enter alphabets/numbers only
                          </span>
                          <span class="error-message"
                            *ngIf="CategoryForm.get('name').getError('pattern') && categorySubmitted">
                            Avoid white spaces
                          </span>
                        </div>
                      </div>
                    </div>
                    <div class="col-lg-12 col-sm-12">
                      <div class="form-group   ">
                        <label class="control-label">Fleets<span class="text-danger2">*</span></label>

                        <p-dropdown *ngIf="!inactiveRecordCategory" [(ngModel)]="selectedCategory" [options]="fleets"
                          formControlName="fleet_id" name="fleet_id" optionLabel="name" styleClass="prime-dropdown"
                          [readonly]="false" placeholder="Select Fleet" filter="true" [scrollHeight]="'120px'"
                          filterPlaceholder="Search">
                        </p-dropdown>
                        <span class="error-message"
                          *ngIf="CategoryForm.get('fleet_id').getError('required') && categorySubmitted">Please
                          provide fleet</span>
                      </div>
                    </div>
                  </div>

                </fieldset>
              </form>
            </div>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default btn-round btn-block1" #closeCategory
          data-dismiss="modal">Close</button>
        <button type="submit" class="btn btn-success btn-round btn-block1" form="CategoryForm"
          (click)="onSubmitCategory(CategoryForm.value)"
          [disabled]=" btnLoading || inactiveRecordCategory">{{btnText}}</button>
      </div>
    </div>
  </div>
</div>