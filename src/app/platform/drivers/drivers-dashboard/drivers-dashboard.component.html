<app-unauthorized-page (isAuthorized)="isAuthorizedUser($event)" *ngIf="!isAuthorized"></app-unauthorized-page>

<div [className]="sidebarCheck ? 'half-open-breadcrum breadcrumb-box' : 'full-open-breadcrum breadcrumb-box' "
  [hidden]="!isAuthorized" #scrollToTop>
  <ol class="breadcrumb breadcrumb-arrow ">
    <li><a class="icon ion-ios-home" routerLink="/iol"> Dashboard </a> </li>
    <li><a routerLink="/iol/drivers">Manage Drivers</a></li>
  </ol>
</div>



<div
  [className]="sidebarCheck ? 'half-open-sidebar page-content  container-fluid' : 'full-open-sidebar page-content  container-fluid'"
  style="padding-bottom: 200px;" [hidden]="!isAuthorized">

  <div class="row" style="margin-left: 0px; margin-right: 0px;">
    <div class="col-lg-4 card-group-row__col">
      <div class="panel panel-default round">
        <div class="col-lg-10" *ngIf="loggedInUser.read_only != true"
          style="padding:0px; margin-top: 10px; margin-bottom: 15px;margin-left: 25px;">
          <button #editpop type="button" *ngIf="add_btn == 0" class="btn btn-lg btn-primary btn-block btncolor"
            (click)="clearForm()" data-target="#editpop1" data-toggle="modal"
            style="font-size: 14px;border-radius: 20px;">
            <i class="ri-add-circle-fill"></i> New
          </button>

          <button type="button" *ngIf="add_btn != 0" class="btn btn-lg btn-primary btn-block btncolor"
            (click)="clearForm2()" data-target="#editpop2" data-toggle="modal"
            style="font-size: 14px;border-radius: 20px;">
            <i class="ri-add-circle-fill"></i> New
          </button>
        </div>

        <div class="col-lg-12" style="margin-top: 5px; margin-bottom: 5px;">
          <form [formGroup]="searchForm" (ngSubmit)="onSearch(searchForm.value)">
            <div class="form-group margin-bottom-10" *ngIf="add_btn == 0">
              <fieldset class="form-fieldset">
                <legend>Filter</legend>

                <div class="form-group margin-bottom-10">
                  <p-dropdown [options]="driverGroup" formControlName="selectGroup" name="selectedGroup"
                    (onChange)="selectGroupDropDownChange($event)" styleClass="prime-dropdown"
                    placeholder="Select group">
                  </p-dropdown>
                </div>
                <div class="form-group margin-bottom-10">
                  <p-dropdown [options]="driverDropdown" name="selectedDriver" formControlName="selectedDriver"
                    [(ngModel)]="selectedDriver" name="selectedDriver" (onChange)="selectDriverDropDownChange($event)"
                    styleClass="prime-dropdown" placeholder="Select driver">
                  </p-dropdown>
                </div>
              </fieldset>
            </div>
            <!-- 2nd -->
            <div class="form-group margin-bottom-10">
              <fieldset class="form-fieldset">
                <legend>Search</legend>

                <div class="form-group margin-bottom-10">
                  <div class="input-search">

                    <input type="text" class="form-control" formControlName="search" name="" placeholder="Search...">
                    <button type="button" class="input-search-close icon " data-toggle="popover" data-original-title=""
                      data-trigger="hover" data-container="body" data-placement="top" data-html="true" id="help2">
                      <i class="ri-question-line" [pTooltip]=ptoolTip></i>
                    </button>
                    <div id="popover-content-help2" class="hide">
                      Some help information goes here
                    </div>
                  </div>
                </div>

                <div class="form-group margin-bottom-0 text-center">
                  <button href="" type="submit" class="btn btn-success btn-round btn-block1"> <i
                      class=" ri-search-line "></i> Search</button>
                  <button (click)="onClearSearch()" href=" " class="btn btn-default btn-round "> <i
                      class="ri-refresh-line "></i>
                    Clear
                  </button>
                </div>
              </fieldset>
            </div>
            <hr *ngIf="add_btn == 0">
            <!-- Download Buttons start-->
            <div class="form-group margin-bottom-0">
              <label class="font-size-14 font-weight-600 ">{{exportVariable}}</label>
              <div class="btn-group btn-group-justified">
                <div class="btn-group" role="group">
                  <a [href]="downloadableLink">
                    <button type="button" class="btn btn-outline btn-default"> <img
                        src="../../../assets/images/icon-xls.png" height="50">
                      <div class="font-size-12">
                        <a [href]="downloadableLink" class="enabled">
                          Download XLS </a>
                      </div>
                    </button>
                  </a>
                </div>
                <div class="btn-group" role="group">
                  <a [href]="downloadableLink1">
                    <button type="button" class="btn btn-outline btn-default"> <img
                        src="../../../assets/images/icon-pdf.png" height="50">
                      <div class="font-size-12">Download PDF</div>
                    </button>
                  </a>
                </div>

              </div>
            </div>
            <!-- Download Buttons ends-->

          </form>
        </div>
      </div>
    </div>

    <div class="col-lg-8">
      <div class="panel panel-default  padding-0  card shadow light" style="min-height: 200px;">
        <div class="panel-body padding-0">
          <div class="tab-content">
            <div class="tab-pane active" id="Parking">
              <div class="panel panel-default margin-bottom-0 ">
                <div class="panel-body padding-15">
                  <!-- app-drivers-dashboard -->
                  <mat-tab-group (selectedTabChange)="activeTabFuction($event)">
                    <!-- Fuel List Tab -->
                    <mat-tab label="Driver List">

                      <div class="table-responsive" style="border: 1px solid #ebebeb;">
                        <p-progressBar *ngIf="loadingFilter" [style]="{'height': '3px'}" mode="indeterminate">
                        </p-progressBar>
                        <table matSort (matSortChange)="sortData($event)"
                          class="table margin-bottom-0 table-condensed1 table-bordered1 text-wrap theme-table1"
                          mat-table [dataSource]="dataSource" mat-elevation-z8>

                          <!-- Checkbox Column -->
                          <!-- <ng-container matColumnDef="select">
                              <th mat-header-cell *matHeaderCellDef style="width: 80px">
                                <mat-checkbox (change)="$event ? masterToggle() : null"
                                  [checked]="selection.hasValue() && isAllSelected()"
                                  [indeterminate]="selection.hasValue() && !isAllSelected()">
                                </mat-checkbox>
                              </th>
                              <td mat-cell *matCellDef="let row" style="width: 80px">
                                <mat-checkbox (click)="$event.stopPropagation()"
                                  (change)="$event ? selection.toggle(row) : null"
                                  [checked]="selection.isSelected(row)">
                                </mat-checkbox>
                              </td>
                            </ng-container> -->

                          <ng-container matColumnDef="name">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header>Drivers</th>
                            <td mat-cell *matCellDef="let row">
                              <!-- <div style="float: left;position: relative;">
                                  <span style="float: left;margin-left: -10px!important;margin-top: 3px;" id="content"
                                    class=""></span>
                                </div> -->
                              <div style="width: 160px">
                                <img [src]="row.photo || '../assets/images/default_user.png'"
                                  class="img-bordered pull-left margin-right-10 " height="36px" />
                                <div class="media-body pointer" [routerLink]="gotoService.gotoDriver(row.id)"
                                  [queryParams]="{ usecase: useCaseId}">
                                  <a class="font-weight-600">{{ row.name || 'N/A' }}</a>
                                </div>
                              </div>
                            </td>
                          </ng-container>
                          <ng-container matColumnDef="cnic">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header>Employee Id</th>
                            <td mat-cell *matCellDef="let row">
                              <div style="width: 160px; float: left">
                                <div class="media-body pointer" [routerLink]="gotoService.gotoDriver(row.id)"
                                  [queryParams]="{ usecase: useCaseId}">
                                  <a class="font-weight-600">{{ row.employee_id || 'N/A' }}</a>
                                </div>
                              </div>
                            </td>
                          </ng-container>
                          <ng-container matColumnDef="status">
                            <th mat-header-cell *matHeaderCellDef>Status</th>
                            <td mat-cell *matCellDef="let row"><span class="label"
                                [ngClass]="(row.status === EntityStatusEnum.Active)? 'label-success': 'label-danger'">{{(row.status
                                === EntityStatusEnum.Active)? 'Active' : 'Inactive'}}</span>
                            </td>
                          </ng-container>
                          <ng-container matColumnDef="driver_group_name">
                            <th mat-header-cell *matHeaderCellDef>Driver Group</th>
                            <td mat-cell *matCellDef="let row"><span>{{row.driver_group_name}}</span></td>
                          </ng-container>
                          <ng-container matColumnDef="on_shift">
                            <th mat-header-cell *matHeaderCellDef>Shift Status</th>
                            <td mat-cell *matCellDef="let row"><span style="color: #333"
                                [ngClass]="row.on_shift ? 'label label-info' : 'label label-default'">{{row.on_shift ?
                                'On Shift' : 'Off Shift'}}</span></td>
                          </ng-container>
                          <ng-container matColumnDef="modified_by">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header>Modified By</th>
                            <td mat-cell *matCellDef="let row">{{ row.modified_by_name || 'N/A' }}</td>
                          </ng-container>
                          <ng-container matColumnDef="modified_datetime">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header>Modified Date</th>
                            <td mat-cell *matCellDef="let row">{{ (row.modified_datetime | date:
                              'M/d/yy, h:mm:ss a') || 'N/A' }}</td>
                          </ng-container>
                          <ng-container matColumnDef="created_datetime">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header>Created Date</th>
                            <td mat-cell *matCellDef="let row">{{ (row.created_datetime | date:
                              'M/d/yy, h:mm:ss a') || 'N/A' }}</td>
                          </ng-container>
                          <ng-container matColumnDef="action">
                            <th mat-header-cell *matHeaderCellDef>Action</th>
                            <td mat-cell *matCellDef="let row">
                              <button *ngIf="loggedInUser.read_only != true" type="button"
                                class="btn btn-icon  btn-info btn-xs " (click)="openEditModal(row)"
                                data-target="#editpop1" data-toggle="modal" pTooltip="Edit">
                                <i class="icon ion-edit"></i>
                              </button>
                              <button *ngIf="loggedInUser.read_only != true" type="button" pTooltip="Delete "
                                (click)="showSwal(row, 'driverList')" class="btn btn-icon  btn-danger btn-xs"
                                data-original-title="Delete"><i class="icon ion-android-delete"></i>
                              </button>
                            </td>
                          </ng-container>
                          <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                          <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
                          <!-- <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                            <tr mat-row *matRowDef="let row; columns: displayedColumns;" matRipple class="element-row"
                              [cdkDetailRow]="row" [cdkDetailRowTpl]="tpl"></tr> -->
                        </table>

                        <!-- <ng-template #tpl let-row>
                            <div class="mat-row detail-row" [@detailExpand] style="overflow: hidden">
                              <div><b style="margin-left: 7px;">Modified Date:</b> {{ (row.modified_datetime | date:
                                'M/d/yy, h:mm:ss a') || 'N/A' }}</div>
                              <div> <b style="margin-left: 7px;">Created Date:</b> {{ (row.created_datetime | date:
                                'M/d/yy, h:mm:ss a') || 'N/A' }}</div>


                            </div>
                          </ng-template> -->

                        <div *ngIf="dataSource?.length === 0" class="no-records">No records found</div>
                        <mat-paginator translate="no" #paginator [length]="totalLength" [hidePageSize]="true"
                          showFirstLastButtons [pageSize]="10" (page)="onPaginateChange($event)"></mat-paginator>
                      </div>
                    </mat-tab>

                    <mat-tab label="Driver Group">
                      <div class="row">
                        <div class="col-lg-12">
                          <div class="table-responsive margin-top-20" style="border: 1px solid #ebebeb;">
                            <p-progressBar *ngIf="showIndeterminateProgress" [style]="{'height': '3px'}"
                              mode="indeterminate"></p-progressBar>

                            <table matSort (matSortChange)="sortDriverGroup($event)"
                              class="table margin-bottom-0 table-condensed1 table-bordered1 text-wrap theme-table1"
                              mat-table [dataSource]="driverGroupListing" mat-elevation-z8>
                              <ng-container matColumnDef="name">
                                <th mat-header-cell *matHeaderCellDef mat-sort-header>Group</th>
                                <td mat-cell *matCellDef="let row">
                                  {{ row.name || '0' }}
                                </td>
                              </ng-container>
                              <ng-container matColumnDef="count">
                                <th mat-header-cell *matHeaderCellDef>Drivers
                                </th>
                                <td mat-cell *matCellDef="let row">{{ row.count || '0' }}</td>
                              </ng-container>
                              <ng-container matColumnDef="action">
                                <th mat-header-cell *matHeaderCellDef>Action
                                </th>
                                <td mat-cell *matCellDef="let row">
                                  <button *ngIf="loggedInUser.read_only != true" type="button"
                                    class="btn btn-icon  btn-info btn-xs " (click)="openEditModal1(row)"
                                    data-target="#editpop2" data-toggle="modal" pTooltip="Edit">
                                    <i class="icon ion-edit"></i>
                                  </button>

                                  <button *ngIf="loggedInUser.read_only != true" type="button" pTooltip="Delete "
                                    (click)="showSwal(row,'driverGroup')" class="btn btn-icon  btn-danger btn-xs"
                                    data-original-title="Delete"><i class="icon ion-android-delete"></i>
                                  </button>
                                </td>
                              </ng-container>
                              <tr mat-header-row *matHeaderRowDef="displayedGroupColums"></tr>
                              <tr mat-row *matRowDef="let row; columns: displayedGroupColums;"></tr>
                            </table>
                            <div *ngIf="driverGroupListing?.length === 0" class="no-records">No records found</div>
                            <mat-paginator translate="no" [length]="totalFuelReportingLength" [hidePageSize]="true"
                              showFirstLastButtons (page)="onPaginateFuelReporting($event)" [pageSize]="10">
                            </mat-paginator>
                          </div>
                        </div>
                      </div>
                    </mat-tab>
                  </mat-tab-group>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

</div>

<!-- popup ist start-->
<div #formModal class="modal fade  modal-success text-left" id="editpop1" role="dialog" tabindex="-1">
  <div class="modal-dialog modal-center  modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">
          <span>x</span>
        </button>
        <h4 class="modal-title">{{inactiveRecord ? 'Update Driver' : formTitle}}</h4>
      </div>

      <div class="modal-body">
        <div class="">
          <div class="row">
            <div class="">
              <form novalidate [formGroup]="driverForm" id="driverFormID" (ngSubmit)="onSubmit(driverForm.value)">
                <fieldset [disabled]="inactiveRecord">
                  <div class="">
                    <div class="col-md-8">
                      <div class="row">
                        <div class="col-sm-4">
                          <div class="form-group">
                            <label class="control-label">Name<span class="text-danger2">*</span></label>
                            <input [readOnly]="onShift" class="form-control" formControlName="name" maxLength="25" />

                            <span class="error-message"
                              *ngIf="driverForm.get('name').getError('required') && submitted">
                              Please provide name
                            </span>

                            <span class="error-message"
                              *ngIf="driverForm.get('name').getError('isAlphabetsAndSpace') && submitted">Enter
                              alphabets only
                            </span>
                            <span class="error-message" *ngIf="driverForm.get('name').getError('pattern') && submitted">
                              Avoid white spaces
                            </span>
                          </div>
                        </div>

                        <div class="col-sm-4">
                          <div class="form-group">
                            <label class="control-label form-label">Employee ID<span
                                class="text-danger2">*</span></label>
                            <input type="text" class="form-control"
                              oninput="this.value = !!this.value && this.value >= 0 ? this.value : null; if (this.value.length > this.maxLength) this.value = this.value.slice(0, this.maxLength);"
                              formControlName="cnic" maxlength="18" />

                            <span class="error-message"
                              *ngIf="driverForm.get('cnic').getError('required') && submitted"> Please
                              provide employee ID</span>

                            <span class="error-message" style="position: relative !important"
                              *ngIf="driverForm.get('cnic').getError('isCNIC') && submitted">Please enter Valid ID
                              <br> <small>(atleast 3-18 characters)</small>
                            </span>

                          </div>
                        </div>


                        <div class="col-sm-4">
                          <div class="form-group">
                            <label class="control-label">Birth Date<span class="text-danger2">*</span></label>
                            <p-calendar [readonlyInput]="true" [maxDate]="minDateForBirth" [monthNavigator]="true"
                              [yearNavigator]="true" [yearRange]="'1950:'+(yearsBeforeNow)" max [(ngModel)]="dob"
                              (onSelect)="returndob()" name="dateOfBirth" [defaultDate]="defaultDate"
                              placeholder="MM/DD/YYYY" styleClass="prime-datetime" formControlName="dob">
                            </p-calendar>



                            <span class="error-message" style="position: relative!important;"
                              *ngIf="driverForm.get('dob').getError('required') && submitted">
                              Please provide date of birth</span>
                          </div>
                        </div>
                      </div>

                      <div class="row">
                        <div class="col-sm-4">
                          <div class="form-group">
                            <label class="control-label">Joining Date<span class="text-danger2">*</span> </label>
                            <div class="input-icon">
                              <!-- [minDate]="dob" | (onSelect)="returndob()"-->
                              <p-calendar [minDate]="dob" [readonlyInput]="true" [monthNavigator]="true"
                                [yearNavigator]="true"
                                [yearRange]="(currentDate.getFullYear() - 40) + ':' +(currentDate.getFullYear())"
                                [(ngModel)]="date_of_joining" name="joiningDate" placeholder="MM/DD/YYYY"
                                styleClass="prime-datetime" formControlName="date_of_joining">
                              </p-calendar>

                              <span class="error-message" style="position: relative!important;"
                                *ngIf="driverForm.get('date_of_joining').getError('required') && submitted"> Please
                                provide joining date</span>
                            </div>
                          </div>
                        </div>

                        <div class="col-sm-4">
                          <div class="form-group">
                            <label class="control-label">Salary
                              <span class="text-danger2">*</span>
                            </label>
                            <div class="input-icon">
                              <input type="number"
                                oninput="this.value = !!this.value && this.value >= 0 ? this.value : null; if (this.value.length > this.maxLength) this.value = this.value.slice(0, this.maxLength);"
                                class="form-control" min=0 formControlName="salary" maxlength="8" />
                              <span class="error-message"
                                *ngIf="driverForm.get('salary').getError('required') && submitted"> Please
                                provide salary</span>
                              <span class="error-message"
                                *ngIf="driverForm.get('salary').getError('pattern') && submitted">
                                Avoid white spaces
                              </span>
                            </div>
                          </div>
                        </div>

                        <div class="col-sm-4">
                          <div class="form-group">
                            <label class="control-label">Marital Status
                              <span class="text-danger2">*</span>
                            </label>
                            <div class="input-icon">
                              <p-dropdown *ngIf="!inactiveRecord" [options]="itemListMaritalStatus"
                                name="selectedMaritalStatus" [(ngModel)]="selectedMaritalStatus"
                                formControlName="marital_status_id" styleClass="prime-dropdown"
                                placeholder="Marital Status">
                              </p-dropdown>
                              <input *ngIf="inactiveRecord" class="form-control" formControlName="marital_status_id" />

                              <span class="error-message"
                                *ngIf="driverForm.get('marital_status_id').getError('required') && submitted"> Please
                                provide marital status</span>
                            </div>
                          </div>
                        </div>
                      </div>

                      <div class="row">
                        <div class="col-sm-4">
                          <div class="form-group">
                            <label class="control-label">Gender
                              <!-- <span class="text-danger2">*</span> -->
                            </label>
                            <div class="input-icon">
                              <p-dropdown *ngIf="!inactiveRecord" [options]="itemListGenders"
                                [(ngModel)]="selectedGender" formControlName="gender_id" name="selectedGender"
                                styleClass="prime-dropdown" placeholder="Gender">
                              </p-dropdown>
                              <input *ngIf="inactiveRecord" class="form-control" formControlName="gender_id" />

                              <span class="error-message"
                                *ngIf="driverForm.get('gender_id').getError('required') && submitted"> Please
                                provide gender
                              </span>
                            </div>
                          </div>
                        </div>

                        <div class="col-sm-4">
                          <div class="form-group">
                            <label class="control-label">Contact Number <span class="text-danger2">*</span>
                            </label>

                            <div class="input-group">
                              <div class="input-group-btn">
                                <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown"
                                  aria-haspopup="true" aria-expanded="false">{{selectedCountry}}<span
                                    class="caret"></span></button>
                                <ul class="dropdown-menu">
                                  <li style="cursor: pointer;" *ngFor="let country of countryCode"
                                    (click)="getSelectedCountry(country)">{{country.name}}</li>
                                </ul>
                              </div><!-- /btn-group -->

                              <!-- [autoClear]="false" -->
                              <p-inputMask formControlName="contact_number" [mask]="dynamicMask" maxlength="13"
                                characterPattern="[0-9]" placeholder="9999999999" [styleClass]="'form-control'">
                              </p-inputMask>

                            </div>
                            <span class="error-message"
                              *ngIf="driverForm.get('contact_number').getError('required') && submitted"> Please
                              provide contact number</span>
                            <span class="error-message"
                              *ngIf="driverForm.get('contact_number').getError('pattern') && submitted">
                              Avoid white spaces
                            </span><!-- /input-group -->
                          </div>
                        </div>

                        <div class="col-sm-4">
                          <div class="form-group">
                            <label class="control-label">Email<span class="text-danger2">*</span></label>
                            <div class="input-icon">
                              <input type="text" autocomplete="new-Email" class="form-control"
                                formControlName="email" />
                              <span class="error-message" style="position: relative !important">
                                <span
                                  *ngIf="driverForm.get('email').getError('pattern') && submitted && driverForm.get('email').value">Please
                                  provide proper email
                                </span>

                                <span *ngIf="driverForm.get('email').getError('required') && submitted">
                                  Please provide email
                                </span>
                              </span>
                            </div>
                          </div>
                        </div>

                        <div class="col-sm-4" *ngIf="!selectedUserId">
                          <div class="form-group">
                            <label class="control-label">Password<span class="text-danger2">*</span></label>

                            <div class="input-group">
                              <input *ngIf="show_password; else hidePassword" type="text" class="form-control"
                                formControlName="password" />
                              <span *ngIf="show_password" class="input-group-addon" id="basic-addon2"><i class="ion-eye"
                                  (click)="togglePassword1()"></i></span>

                              <ng-template #hidePassword>
                                <input type="password" autocomplete="new-password" class="form-control"
                                  formControlName="password" />
                                <span class="input-group-addon" id="basic-addon2"><i class="ion-eye-disabled"
                                    (click)="togglePassword(driverForm.value)"></i></span>
                              </ng-template>

                            </div>
                            <span class="error-message" style="position: absolute !important"
                              *ngIf="driverForm.get('password').getError('required') && submitted"> Please
                              provide password
                            </span>
                            <div *ngIf="f.password.errors">
                              <span id="txt" class="error-message" *ngIf="f.password.errors.pattern">At least one
                                lowercase
                                letter, one Uppercase letter, one numeric digit and length atleast 8 Characters</span>
                            </div>
                          </div>

                        </div>
                        <!--  -->
                        <div class="col-sm-4">
                          <div class="form-group">
                            <label class="control-label">Select Driver Group</label>
                            <div class="input-group">
                              <p-dropdown [options]="driverGroup" formControlName="driver_group_id" name="selectedGroup"
                                styleClass="prime-dropdown" placeholder="Select group">
                              </p-dropdown>
                            </div>
                          </div>

                        </div>
                        <div class="col-sm-4" *ngIf="selectedUserId">
                          <div class="form-group">
                            <label class="control-label">Status<span class="text-danger">*</span></label>

                            <p-dropdown [options]="statusList" formControlName="status" name="status"
                              styleClass="prime-dropdown" placeholder="Select Status">
                            </p-dropdown>

                            <span class="error-message"
                              *ngIf="driverForm.get('status').getError('required') && submitted">Please
                              provide status</span>
                          </div>
                        </div>
                        <!--  -->
                        <!--  -->
                        <div class="col-sm-4">
                          <div class="form-group">
                            <label class="control-label">P.O.I</label>
                            <div class="input-group">
                              <input type="checkbox" formControlName="is_poi">
                            </div>
                          </div>

                        </div>
                        <!--  -->

                      </div>

                      <div [hidden]="(selectedRole !== EntityType.DRIVER)" class="col-sm-6 margin-top-25">
                        <div class="checkbox-custom checkbox-primary ">
                          <input type="checkbox" id="checkbox1" name="inputRadios" formControlName="speed" />
                          <label for="checkbox1">Driver Administrative Rights</label>
                        </div>
                      </div>

                    </div>

                    <div class="col-lg-4">
                      <div class="padding-20 padding-bottom-0 padding-top-0">
                        <div class="form-group">
                          <label class="control-label">Picture </label>
                          <div class="input-icon">
                            <div class="margin-bottom-10" id="preview">
                              <div class="container1">
                                <img #img [src]="avatar_url? avatar_url : '/assets/images/iol/driver_placeholder.png'"
                                  class="img-rounded img-bordered img-bordered-green" width="150px" height="150px">
                                <div class="middle col-md-7">
                                  <button *ngIf="avatar_url" type="button" (click)="removeImage(avatar_url)"
                                    class="btn btn-sm btn-primary">Remove
                                  </button>
                                </div>
                              </div>
                            </div>
                            <input *ngIf="!avatar_url" #myInput type="file" accept="image/*"
                              (change)="fileChange($event)" class="btn btn-default btn-block">
                          </div>
                          <span>
                            <div class="alert alert-danger padding-8" *ngIf="notImage">Please choose only (/jpg, .png
                              images)</div>
                          </span>
                        </div>
                      </div>
                    </div>
                  </div>
                </fieldset>

              </form>
            </div>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default btn-round btn-block1" #closeForm
          data-dismiss="modal">Close</button>
        <button type="submit" class="btn btn-success btn-round btn-block1" form="driverFormID">{{btnText}}</button>

      </div>
    </div>
  </div>
</div>
<!-- popup ends -->
<!-- edit 2nd popup start -->
<div #formModal2 class="modal fade  modal-success text-left" id="editpop2" role="dialog" tabindex="-1">
  <div class="modal-dialog modal-center  modal-lg">
    <div class="modal-content">
      <div class="modal-header" [ngStyle]="theme">
        <button type="button" class="close" data-dismiss="modal">
          <span>x</span>
        </button>
        <h4 class="modal-title">{{inactiveRecord ? 'View Driver' : formTitle}}</h4>
      </div>

      <div class="modal-body">
        <div class="">
          <div class="row">
            <div class="">
              <form novalidate [formGroup]="GroupForm" id="driverGroupID" (ngSubmit)="onSubmitDriver(GroupForm.value)">
                <fieldset [disabled]="inactiveRecord">
                  <div class="">
                    <div class="col-md-12">
                      <div class="row">
                        <div class="col-sm-6">
                          <div class="form-group">
                            <label class="control-label form-label">Name<span class="text-danger2">*</span></label>
                            <div class="input-icon">
                              <input [readOnly]="onShift" class="form-control" formControlName="name" maxLength="25" />
                              <span class="error-message"
                                *ngIf="GroupForm.get('name').getError('required') && submitted"> Please
                                provide name
                              </span>
                              <span class="error-message"
                                *ngIf="GroupForm.get('name').getError('isAlphabetsAndSpace') && submitted">Enter
                                alphabets only
                              </span>
                            </div>
                          </div>
                        </div>

                        <div class="col-sm-6" *ngIf="!updateEdit2">
                          <div class="form-group">
                            <label class="control-label form-label">Total Drivers</label>
                            <input disabled type="text" class="form-control" formControlName="countNumber" />
                          </div>
                        </div>

                        <div class="col-sm-6">
                          <div class="form-group">
                            <label class="control-label">Drivers<span class="text-danger2">*</span></label>
                            <div class="input-group" style="width: 100%;">
                              <p-multiSelect [options]="groupDriverList" name="selectDriver"
                                formControlName="selectDriver" [(ngModel)]="selectedDriver" optionLabel="name"
                                styleClass="prime-dropdown" filter="true" defaultLabel="Select Drivers">
                              </p-multiSelect>
                              <span class="error-message"
                                *ngIf="GroupForm.get('selectDriver').getError('required') && submitted">
                                Please Provide Driver
                              </span>
                            </div>
                          </div>
                        </div>

                      </div>
                    </div>
                  </div>
                </fieldset>
              </form>
            </div>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default btn-round btn-block1" #closeForm2
          data-dismiss="modal">Close</button>
        <button type="submit" class="btn btn-success btn-round btn-block1" form="driverGroupID">{{btnText}}</button>
      </div>
    </div>
  </div>
</div>
<!-- popup end -->

<!-- bulk uplpoad starts -->
<!-- <div #formModal3 class="modal fade  modal-success text-left" id="bulkUploadModal" role="dialog" tabindex="-1">
  <div class="modal-dialog modal-center  ">
    <div class="modal-content">
      <div class="modal-header" [ngStyle]="theme">
        <button type="button" class="close" (click)="bulkSubmitted = false" data-dismiss="modal">
          <span>x</span>
        </button>
        <h4 class="modal-title">Bulk Upload</h4>
      </div>
      <div class="modal-body">
        <div class="row">
          <div class="col-lg-12">

            <form novalidate [formGroup]="bulkUploadForm" id="bulkUploadFormID"
              (ngSubmit)="bulkUploadSubmit(bulkUploadForm.value)">
              <div class="row">
                <div class="col-lg-12">
                  <div class="padding-20 padding-bottom-0 padding-top-0">
                    <div class="form-group">

                      <button class="file-upload-btn" type="button"
                        onclick="$('.file-upload-input').trigger( 'click' )">
                        Browse</button>

                      <span class="fileName-padding" *ngIf="selectedFileName != '' && !notCSVExcel">
                        {{selectedFileName}}
                      </span>

                      <span class="alert alert-danger fileName-padding" *ngIf="notCSVExcel">
                        Please choose excel files only
                      </span>

                      <div class="image-upload-wrap">
                        <input class="file-upload-input" type='file' (change)="bulkUploadFileChange($event)"
                          accept=".ms-excel, .xlsx" formControlName="csvFiles" />

                        <div class="drag-text">
                          <h4>Drag and drop your excel file here</h4>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </form>

          </div>
        </div>
      </div>

      <div class="modal-footer">
        <button type="button" #closeFormBulk (click)="bulkSubmitted = false"
          class="btn btn-default btn-round btn-block1" data-dismiss="modal">Close</button>

        <button type="submit" class="btn btn-primary btn-round btn-block1" form="bulkUploadFormID"
          [disabled]="disableButton">Upload
        </button>
      </div>

    </div>
  </div>
</div> -->
<!-- bulk upload ends -->