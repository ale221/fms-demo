{"version":3,"file":"signalr-module.js","sources":["../../../src/modules/signalr-module.ts"],"names":[],"mappings":";;;;AAAA,OAAO,EAAE,cAAc,EAAuB,QAAQ,EAAE,MAAM,EAAE,sBAAsB;AACtF,OAAO,EAAE,OAAO,EAAE,4BAA4B;;AAG9C,qBAAM,qBAAqB,GAAG,IAAI,cAAc,CAAC,uBAAuB,CAAC,CAAC;AAC1E;AACG;AAA4B;AAAmB;AAAe;AAAjE,MAAM,wBAAwB,aAAmC,EAAE,IAAY;AAC/E,IACC,qBAAI,aAAa,GAAG,gBAAgB,EAAE,CAAC;AACxC,IACC,MAAM,CAAC,IAAI,OAAO,CAAC,aAAa,EAAE,IAAI,EAAE,aAAa,CAAC,CAAC;AACxD,CAAC;AACD;AACG;AAAe;AAAlB;AAA8B,IAC7B,qBAAI,MAAM,GAAG,SAAS,EAAE,CAAC;AAC1B,IAAC,qBAAI,eAAe,GAAG,mBAAM,MAAM,EAAC,CAAC,MAAM,CAAC,aAAa,CAAC;AAC1D,IAAC,EAAE,CAAC,CAAC,eAAe,IAAI,IAAI,CAAC,CAAC,CAAC;AAC/B,QAAE,MAAM,IAAI,KAAK,CAAC,kIAAkI,CAAC,CAAC;AACtJ,KAAE;AACF,IAAC,MAAM,CAAC,eAAe,CAAC;AACxB,CAAC;AACD;AACG;AAAe;AAAlB;AAAuB,IACtB,qBAAI,MAAM,GAAG,mBAAM,MAAM,EAAC,CAAC,MAAM,CAAC;AACnC,IAAC,EAAE,CAAC,CAAC,MAAM,IAAI,IAAI,CAAC,CAAC,CAAC;AACtB,QAAE,MAAM,IAAI,KAAK,CAAC,2GAA2G,CAAC,CAAC;AAC/H,KAAE;AACF,IAAC,MAAM,CAAC,MAAM,CAAC;AACf,CAAC;AACD,SAIY,OAAO;AAClB;AAGD;AAA+B;AAAM;AAAQ;AACvC;AACQ;AAAQ,IAFP,qBAAO;AAAO;AAA0C;AAC9D;AACH,cAFiB,uBAAiC;AAAI,QAC1D,MAAM,CAAC;AACT,YAAG,QAAQ,EAAE,aAAa;AAC1B,YAAG,SAAS,EAAE;AACd,gBAAI;AACJ,oBAAK,OAAO,EAAE,qBAAqB;AACnC,oBAAK,UAAU,EAAE,uBAAuB;AACxC,iBAAK;AACL,gBAAI;AACJ,oBAAK,IAAI,EAAE,CAAC,qBAAqB,EAAE,MAAM,CAAC;AAC1C,oBAAK,OAAO,EAAE,OAAO;AACrB,oBAAK,UAAU,EAAE,CAAC,aAAa,CAAC;AAChC,iBAAK;AACL,aAAI;AACJ,SAAG,CAAC;AACJ;AAEG;AAAQ;AAAmB;AAAQ,IAAvB,sBAAQ;AAAO;AAC9B;AAAQ;AAAkB,QAAxB,MAAM,IAAI,KAAK,CAAC,iCAAiC,CAAC,CAAC;AACrD,MApBU;AAAC;0BANV,QAAQ,SAAC,3CAOL;EANJ,SAAS,EAAE,CAAC,8BACX,OAAO,EAAE,OAAO;mBAChB,QAAQ,IAAS,0BACjB,CAAC,kBACF;;;;;;;;;;;;gDAEkE;AAAC,wBArCpE;AAAE;AAAM,SAoCK,aAAa;AACzB;AAAwD;AAG9C;AAEQ;AAAQ;AAClB;AAKW;AAAQ;AAMnB;AAAE;AAAe","sourcesContent":["import { InjectionToken, ModuleWithProviders, NgModule, NgZone } from '@angular/core';\nimport { SignalR } from '../services/signalr';\nimport { SignalRConfiguration } from '../services/signalr.configuration';\n\nconst SIGNALR_CONFIGURATION = new InjectionToken('SIGNALR_CONFIGURATION');\n\nexport function createSignalr(configuration: SignalRConfiguration, zone: NgZone) {\n\n\tlet jConnectionFn = getJConnectionFn();\n\n\treturn new SignalR(configuration, zone, jConnectionFn);\n}\n\nfunction getJConnectionFn(): any {\n\tlet jQuery = getJquery();\n\tlet hubConnectionFn = (<any>window).jQuery.hubConnection;\n\tif (hubConnectionFn == null) {\n\t\tthrow new Error('Signalr failed to initialize. Script \\'jquery.signalR.js\\' is missing. Please make sure to include \\'jquery.signalR.js\\' script.');\n\t}\n\treturn hubConnectionFn;\n}\n\nfunction getJquery(): any {\n\tlet jQuery = (<any>window).jQuery;\n\tif (jQuery == null) {\n\t\tthrow new Error('Signalr failed to initialize. Script \\'jquery.js\\' is missing. Please make sure to include jquery script.');\n\t}\n\treturn jQuery;\n}\n\n@NgModule({\n\tproviders: [{\n\t\tprovide: SignalR,\n\t\tuseValue: SignalR\n\t}]\n})\nexport class SignalRModule {\n\tpublic static forRoot(getSignalRConfiguration: Function): ModuleWithProviders {\n\t\treturn {\n\t\t\tngModule: SignalRModule,\n\t\t\tproviders: [\n\t\t\t\t{\n\t\t\t\t\tprovide: SIGNALR_CONFIGURATION,\n\t\t\t\t\tuseFactory: getSignalRConfiguration\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdeps: [SIGNALR_CONFIGURATION, NgZone],\n\t\t\t\t\tprovide: SignalR,\n\t\t\t\t\tuseFactory: (createSignalr)\n\t\t\t\t}\n\t\t\t]\n\t\t};\n\t}\n\n\tpublic static forChild(): ModuleWithProviders {\n\t\tthrow new Error('forChild method not implemented');\n\t}\n}\n"]}