{"version":3,"file":"signalr.module.js","sourceRoot":"","sources":["../../../src/services/signalr.module.ts"],"names":[],"mappings":";;;;AAAA,OAAO,EAAE,cAAc,EAAuB,QAAQ,EAAE,MAAM,EAAE,sBAAsB;AACtF,OAAO,EAAE,OAAO,EAAE,kBAAkB;AAGpC,qBAAM,qBAAqB,GAAG,IAAI,cAAc,CAAC,uBAAuB,CAAC,CAAC;AAC1E,MAAM,CAAC,qBAAM,yBAAyB,GAAG,IAAI,cAAc,CAAC,2BAA2B,CAAC,CAAC;;;;;;AAEzF,MAAM,wBAAwB,aAAmC,EAAE,IAAY;IAE9E,qBAAI,aAAa,GAAG,gBAAgB,EAAE,CAAC;IAEvC,MAAM,CAAC,IAAI,OAAO,CAAC,aAAa,EAAE,IAAI,EAAE,aAAa,CAAC,CAAC;CACvD;;;;AAED,MAAM;IACL,qBAAI,MAAM,GAAG,SAAS,EAAE,CAAC;IACzB,qBAAI,eAAe,GAAG,mBAAM,MAAM,EAAC,CAAC,MAAM,CAAC,aAAa,CAAC;IACzD,EAAE,CAAC,CAAC,eAAe,IAAI,IAAI,CAAC,CAAC,CAAC;QAC7B,MAAM,IAAI,KAAK,CAAC,kIAAkI,CAAC,CAAC;KACpJ;IACD,MAAM,CAAC,eAAe,CAAC;CACvB;;;;AAED;IACC,qBAAI,MAAM,GAAG,mBAAM,MAAM,EAAC,CAAC,MAAM,CAAC;IAClC,EAAE,CAAC,CAAC,MAAM,IAAI,IAAI,CAAC,CAAC,CAAC;QACpB,MAAM,IAAI,KAAK,CAAC,2GAA2G,CAAC,CAAC;KAC7H;IACD,MAAM,CAAC,MAAM,CAAC;CACd;SAKW,OAAO;;;;;;;;IAIJ,qBAAO;;;;cAAC,uBAAiC;QACtD,MAAM,CAAC;YACN,QAAQ,EAAE,aAAa;YACvB,SAAS,EAAE;gBACV;oBACC,OAAO,EAAE,yBAAyB;oBAClC,UAAU,EAAE,gBAAgB;iBAC5B;gBACD;oBACC,OAAO,EAAE,qBAAqB;oBAC9B,UAAU,EAAE,uBAAuB;iBACnC;gBACD;oBACC,IAAI,EAAE,CAAC,yBAAyB,EAAE,qBAAqB,EAAE,MAAM,CAAC;oBAChE,OAAO,EAAE,OAAO;oBAChB,UAAU,EAAE,CAAC,aAAa,CAAC;iBAC3B;aACD;SACD,CAAC;;;;;IAGW,sBAAQ;;;;QACrB,MAAM,IAAI,KAAK,CAAC,iCAAiC,CAAC,CAAC;;;gBA7BpD,QAAQ,SAAC;oBACT,SAAS,EAAE,CAAC;4BACX,OAAO,EAAE,OAAO;4BAChB,QAAQ,IAAS;yBACjB,CAAC;iBACF;;;;wBApCD;;SAqCa,aAAa","sourcesContent":["import { InjectionToken, ModuleWithProviders, NgModule, NgZone } from '@angular/core';\nimport { SignalR } from './signalr';\nimport { SignalRConfiguration } from './signalr.configuration';\n\nconst SIGNALR_CONFIGURATION = new InjectionToken('SIGNALR_CONFIGURATION');\nexport const SIGNALR_JCONNECTION_TOKEN = new InjectionToken('SIGNALR_JCONNECTION_TOKEN');\n\nexport function createSignalr(configuration: SignalRConfiguration, zone: NgZone) {\n\n\tlet jConnectionFn = getJConnectionFn();\n\n\treturn new SignalR(configuration, zone, jConnectionFn);\n}\n\nexport function getJConnectionFn(): any {\n\tlet jQuery = getJquery();\n\tlet hubConnectionFn = (<any>window).jQuery.hubConnection;\n\tif (hubConnectionFn == null) {\n\t\tthrow new Error('Signalr failed to initialize. Script \\'jquery.signalR.js\\' is missing. Please make sure to include \\'jquery.signalR.js\\' script.');\n\t}\n\treturn hubConnectionFn;\n}\n\nfunction getJquery(): any {\n\tlet jQuery = (<any>window).jQuery;\n\tif (jQuery == null) {\n\t\tthrow new Error('Signalr failed to initialize. Script \\'jquery.js\\' is missing. Please make sure to include jquery script.');\n\t}\n\treturn jQuery;\n}\n\n@NgModule({\n\tproviders: [{\n\t\tprovide: SignalR,\n\t\tuseValue: SignalR\n\t}]\n})\nexport class SignalRModule {\n\tpublic static forRoot(getSignalRConfiguration: Function): ModuleWithProviders {\n\t\treturn {\n\t\t\tngModule: SignalRModule,\n\t\t\tproviders: [\n\t\t\t\t{\n\t\t\t\t\tprovide: SIGNALR_JCONNECTION_TOKEN,\n\t\t\t\t\tuseFactory: getJConnectionFn\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tprovide: SIGNALR_CONFIGURATION,\n\t\t\t\t\tuseFactory: getSignalRConfiguration\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdeps: [SIGNALR_JCONNECTION_TOKEN, SIGNALR_CONFIGURATION, NgZone],\n\t\t\t\t\tprovide: SignalR,\n\t\t\t\t\tuseFactory: (createSignalr)\n\t\t\t\t}\n\t\t\t]\n\t\t};\n\t}\n\n\tpublic static forChild(): ModuleWithProviders {\n\t\tthrow new Error('forChild method not implemented');\n\t}\n}\n"]}